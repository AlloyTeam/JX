(function(i){var h=i.Jx,p={},t={},r={NO_DEBUG:0,SHOW_ALL:1},s={debug:1},u=function(d,l,q){d=String(d);if(s.debug)if(this.console)this.console.out?this.console.out(d,l,q):alert(d+" - \u6d88\u606f\u7c7b\u578b["+q+"]");return d};try{if(typeof h==="undefined"||h.mark&&h.mark==="JxMark"){if(h){p=h.VERSIONS;t=h.PACKAGES}h=function(d,l){var q=this;if(l)if(q&&q.hasOwnProperty&&q instanceof h)q._init();else q=new h(d);else if(d){d=String(d);try{if(h.VERSIONS[d])q=h.VERSIONS[d];else{q=h.VERSIONS[h.DEFAULT_VERSION];
throw Error("\u6ca1\u6709\u627e\u5230 JET version "+d+", \u6240\u4ee5\u8fd4\u56de\u9ed8\u8ba4\u7248\u672c JET version "+h.DEFAULT_VERSION+"!");}}catch(g){q.out("A.\u9519\u8bef\uff1a["+g.name+"] "+g.message+", "+g.fileName+", \u884c\u53f7:"+g.lineNumber+"; stack:"+typeof g.stack,2)}}else q=h.VERSIONS[h.DEFAULT_VERSION];return q};h.prototype={version:"1.0.%Version%",DEBUG:r,option:s,_init:function(){this.constructor=h},$namespace:function(d){if(!d)return i;d=String(d);var l,q=d.split("."),g=i;for(d=
0;d<q.length;d+=1){l=q[d];g[l]=g[l]||{};g=g[q[d]]}return g},$package:function(){var d=arguments[0],l=arguments[arguments.length-1],q=i,g;if(typeof l==="function"){if(typeof d==="string"){q=this.$namespace(d);h.PACKAGES[d]||(h.PACKAGES[d]={isLoaded:true,returnValue:g});q.packageName=d}else if(typeof d==="object")q=d;g=l.call(q,this);typeof d==="string"&&(h.PACKAGES[d].returnValue=g)}else throw Error("Function required");},checkPackage:function(d){return h.PACKAGES[d]},out:u,debug:function(){},profile:function(){},
warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}};h.VERSIONS=p;h.PACKAGES=t;h.VERSIONS["1.0.%Version%"]=new h("1.0.%Version%",true);h.DEFAULT_VERSION="1.0.%Version%";h.mark="JxMark";i.Jet=i.Jx=h}else throw Error('"Jx" name is defined in other javascript code !!!');}catch(k){u("JET \u5fae\u5185\u6838\u521d\u59cb\u5316\u5931\u8d25! B.\u9519\u8bef\uff1a["+
k.name+"] "+k.message+", "+k.fileName+", \u884c\u53f7:"+k.lineNumber+"; stack:"+typeof k.stack,1)}})(this);
Jx().$package(function(i){var h,p,t,r,s,u,k,d,l,q,g;h=function(a){return typeof a==="undefined"};p=function(a){return a===null};t=function(a){return(a===0||a)&&a.constructor===Number};s=function(a){return(a===false||a)&&a.constructor===Boolean};r=function(a){return(a===""||a)&&a.constructor===String};u=function(a){return a&&(a.constructor===Object||Object.prototype.toString.call(a)==="[object Object]")};k=function(a){return a&&(a.constructor===Array||Object.prototype.toString.call(a)==="[object Array]")};
d=function(a){return a&&a.callee&&t(a.length)?true:false};l=function(a){return a&&a.constructor===Function};q=function(a){var b=arguments,f,e;if(b.length===1){a=this;b=0}else{a=b[0]||{};b=1}for(;b<arguments.length;b++){e=arguments[b];for(f in e){var m=a[f],n=e[f];if(m!==n)if(n&&u(n)&&!k(n)&&!n.nodeType&&!l(n)){m=a[f]||{};a[f]=q(m,n||(n.length!=null?[]:{}))}else if(n!==undefined)a[f]=n}}return a};g=function(){var a=arguments.length,b=arguments[a-1];b.init=b.init||function(){};if(a===2){a=arguments[0].extend;
var f=function(){};f.prototype=a.prototype;var e=function(){this.init.apply(this,arguments)};e.superClass=a.prototype;e.callSuper=function(m,n){var w=Array.prototype.slice,z=w.call(arguments,2);(n=e.superClass[n])&&n.apply(m,z.concat(w.call(arguments)))};e.prototype=new f;e.prototype.constructor=e;i.extend(e.prototype,b);e.prototype.init=function(){b.init.apply(this,arguments)};return e}else if(a===1){a=function(){return this.init.apply(this,arguments)};a.prototype=b;return a}};var c=new g({init:function(a,
b,f,e,m){var n=a.concat();if(e)n=a;this.timeout=window.setTimeout(function(){var w=+new Date;do b.call(f,n.shift());while(n.length>0&&+new Date-w<50);if(n.length>0)this.timeout=window.setTimeout(arguments.callee,25);else m&&m(a)},25)},stop:function(){clearTimeout(this.timeout)}});i.isUndefined=h;i.isNull=p;i.isNumber=t;i.isString=r;i.isBoolean=s;i.isObject=u;i.isArray=k;i.isArguments=d;i.isFunction=l;i.$typeof=function(a){return h(a)?"undefined":p(a)?"null":t(a)?"number":s(a)?"boolean":r(a)?"string":
u(a)?"object":k(a)?"array":d(a)?"arguments":l(a)?"function":"other"};i.$return=function(a){return i.isFunction(a)?a:function(){return a}};i.$try=function(){var a,b=arguments.length,f;for(a=0;a<b;a++)try{f=arguments[a]();break}catch(e){i.out("C.\u9519\u8bef\uff1a["+e.name+"] "+e.message+", "+e.fileName+", \u884c\u53f7:"+e.lineNumber+"; stack:"+typeof e.stack,2)}return f};i.emptyFunc=function(){};i.clone=function(a){var b=function(){};b.prototype=a;return new b};i.getLength=function(a){var b,f=0;for(b in a)a.hasOwnProperty(b)&&
f++;return f};i.checkJSON=function(){return true};i.random=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)};i.extend=q;i.now=function(){return+new Date};i.timedChunk=function(a,b,f,e,m){var n=a.concat();if(e)n=a;window.setTimeout(function(){var w=+new Date;do b.call(f,n.shift());while(n.length>0&&+new Date-w<50);if(n.length>0)window.setTimeout(arguments.callee,25);else m&&m(a)},25)};i.rebuild=function(a,b){b=b||{};a.$$rebuildedFunc=a.$$rebuildedFunc||function(){var f,e;f=b.contextObj||this;
e=Array.prototype.slice.call(arguments,0);if(e!==undefined)e=e.concat(b.arguments);if(b.event===false)e=e.slice(1);return a.apply(f,e)};return a.$$rebuildedFunc};i.pass=function(a){var b=Array.prototype.slice,f=b.call(arguments,1);return function(){return a.apply(this,f.concat(b.call(arguments)))}};i.bind=function(a,b){var f=Array.prototype.slice,e=f.call(arguments,2);return function(){return a.apply(b,e.concat(f.call(arguments)))}};i.bindNoEvent=void 0;i.Class=g;i.Chunk=c});
Jx().$package(function(i){i.array=i.array||{};var h=i.array,p,t,r,s,u,k,d,l,q,g,c,a;p=Array.prototype.indexOf?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],b)}:function(b,f,e){if(e==null)e=0;else if(e<0)e=Math.max(0,b.length+e);for(e=e;e<b.length;e++)if(b[e]===f)return e;return-1};t=Array.prototype.lastIndexOf?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],b)}:function(b,f,
e){if(e==null)e=b.length-1;else if(e<0)e=Math.max(0,b.length+e);for(e=e;e>=0;e--)if(b[e]===f)return e;return-1};r=Array.prototype.forEach?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],b)}:function(b,f,e){var m=b.length;if(typeof f!="function")throw new TypeError;for(var n=0;n<m;n++)n in b&&f.call(e,b[n],n,b)};s=Array.prototype.filter?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],
b)}:function(b,f,e){var m=b.length;if(typeof f!="function")throw new TypeError;for(var n=[],w=0;w<m;w++)if(w in b){var z=b[w];f.call(e,z,w,b)&&n.push(z)}return n};u=Array.prototype.some?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],b)}:function(b,f,e){var m=b.length;if(typeof f!="function")throw new TypeError;for(var n=0;n<m;n++)if(n in b&&f.call(e,b[n],n,b))return true;return false};k=Array.prototype.map?function(){var b=Array.prototype.slice.call(arguments,
1);return Array.prototype.map.apply(arguments[0],b)}:function(b,f,e){var m=b.length;if(typeof f!="function")throw new TypeError;for(var n=Array(m),w=0;w<m;w++)if(w in b)n[w]=f.call(e,b[w],w,b);return n};d=Array.prototype.every?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],b)}:function(b,f,e){var m=b.length;if(typeof f!="function")throw new TypeError;for(var n=0;n<m;n++)if(n in b&&!f.call(e,b[n],n,b))return false;return true};l=Array.prototype.reduce?
function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],b)}:function(b,f){var e=b.length>>>0;if(typeof f!="function")throw new TypeError;if(e==0&&arguments.length==2)throw new TypeError;var m=0;if(arguments.length>=3)var n=arguments[2];else{do{if(m in b){n=b[m++];break}if(++m>=e)throw new TypeError;}while(1)}for(;m<e;m++)if(m in b)n=f.call(null,n,b[m],m,b);return n};q=Array.prototype.reduceRight?function(){var b=Array.prototype.slice.call(arguments,
1);return Array.prototype.reduceRight.apply(arguments[0],b)}:function(b,f){var e=b.length>>>0;if(typeof f!="function")throw new TypeError;if(e==0&&arguments.length==2)throw new TypeError;e=e-1;if(arguments.length>=3)var m=arguments[2];else{do{if(e in b){m=b[e--];break}if(--e<0)throw new TypeError;}while(1)}for(;e>=0;e--)if(e in b)m=f.call(null,m,b[e],e,b);return m};g=function(b){var f=i.$typeof(b);return f?f!="array"&&f!="arguments"?[b]:b:[]};c=function(b,f){return p(b,f)>-1};a=function(b){for(var f=
[],e=0,m=b.length;e<m;e++)c(f,b[e])||f.push(b[e]);return f};h.indexOf=p;h.lastIndexOf=t;h.forEach=r;h.filter=s;h.some=u;h.map=k;h.every=d;h.reduce=l;h.reduceRight=q;h.toArray=g;h.remove=function(b,f){f=g(f);var e,m,n=false;for(e=0;e<f.length;e++)for(m=0;m<b.length;m++)if(b[m]===f[e]){b.splice(m,1);n=true}return n};h.replace=function(b,f,e){for(;0<b.length;ij++)if(b[0]===f){b[0]=e;return true}return false};h.bubbleSort=function(b,f){f=f||function(A,x){return A-x};for(var e=b.length,m,n,w=0;w<e-1;w++){n=
false;for(var z=e-1;z>w;z--)if(f(b[z],b[z-1])<0){n=true;m=b[z-1];b[z-1]=b[z];b[z]=m}if(!n)break}return b};h.binarySearch=function(b,f,e){for(var m=0,n=b.length,w=Math.floor(b.length/2);n!=w;){if(e(f,b[w])>0)m=w+1;else n=w;w=Math.floor((m+n)/2)}return w};h.contains=c;h.uniquelize=a;h.intersect=function(b,f){for(var e=[],m=0,n=b.length;m<n;m++)c(f,b[m])&&e.push(b[m]);return e};h.minus=function(b,f){for(var e=[],m=0,n=b.length;m<n;m++)c(f,b[m])||e.push(b[m]);return e};h.union=function(b,f){return a(b.concat(f))}});
Jx().$package(function(i){i.browserOptions={adjustBehaviors:true,htmlClass:true};i.host=window.location.host;var h=navigator.platform.toLowerCase(),p=navigator.userAgent.toLowerCase(),t=navigator.plugins,r,s,u,k,d;k=function(g,c){g=(""+g).replace(/_/g,".");c=c||1;g=String(g).split(".");g=g[0]+"."+(g[1]||"0");return g=Number(g).toFixed(c)};r={getPlatform:function(){return h},name:window.orientation!=undefined?"iPod":(h.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,
win:0,linux:0,mac:0,set:function(g,c){this.name=g;this.version=c;this[g]=c}};r[r.name]=true;(d=p.match(/windows ([\d.]+)/))?r.set("win",k(d[1])):(d=p.match(/windows nt ([\d.]+)/))?r.set("win",k(d[1])):(d=p.match(/linux ([\d.]+)/))?r.set("linux",k(d[1])):(d=p.match(/mac ([\d.]+)/))?r.set("mac",k(d[1])):(d=p.match(/ipod ([\d.]+)/))?r.set("iPod",k(d[1])):(d=p.match(/ipad[\D]*os ([\d_]+)/))?r.set("iPad",k(d[1])):(d=p.match(/iphone ([\d.]+)/))?r.set("iPhone",k(d[1])):(d=p.match(/android ([\d.]+)/))&&r.set("android",
k(d[1]));s={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return t},plugins:{flash:function(){var g=0;if(t&&t.length){var c=t["Shockwave Flash"];if(c&&c.description)g=k(c.description.match(/\b(\d+)\.\d+\b/)[1],1)||g}else for(c=13;c--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c);g=k(c);break}catch(a){}return g}()},getUserAgent:function(){return p},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,
adobeAir:0,set:function(g,c){this.name=g;this.version=c;this[g]=c}};(d=p.match(/msie ([\d.]+)/))?s.set("ie",k(d[1])):(d=p.match(/firefox\/([\d.]+)/))?s.set("firefox",k(d[1])):(d=p.match(/chrome\/([\d.]+)/))?s.set("chrome",k(d[1])):(d=p.match(/opera.([\d.]+)/))?s.set("opera",k(d[1])):(d=p.match(/adobeair\/([\d.]+)/))?s.set("adobeAir",k(d[1])):(d=p.match(/version\/([\d.]+).*safari/))&&s.set("safari",k(d[1]));(d=p.match(/version\/([\d.]+).*mobile.*safari/))&&s.set("mobileSafari",k(d[1]));r.iPad&&s.set("mobileSafari",
"0.0");if(s.ie)if(document.documentMode)document.documentMode!==Math.floor(s.ie)&&s.set("ie",k(document.documentMode));else document.documentMode=Math.floor(s.ie);u={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(g,c){this.name=g;this.version=c;this[g]=c}};(d=p.match(/trident\/([\d.]+)/))?u.set("trident",k(d[1])):(d=p.match(/gecko\/([\d.]+)/))?u.set("gecko",k(d[1])):(d=p.match(/applewebkit\/([\d.]+)/))?u.set("webkit",k(d[1])):(d=p.match(/presto\/([\d.]+)/))&&u.set("presto",
k(d[1]));if(s.ie)if(s.ie==6)u.set("trident",k("4"));else if(s.ie==7||s.ie==8)u.set("trident",k("5"));if(i.browserOptions.adjustBehaviors)if(s.ie&&s.ie<7)try{document.execCommand("BackgroundImageCache",false,true)}catch(l){}var q=function(g){return String(g).replace(/\./gi,"_")};d=function(){var g=document.documentElement,c=[g.className];c.push("javascriptEnabled");c.push(r.name);c.push(r.name+q(r.version));c.push(s.name);c.push(s.name+q(s.version));document.documentMode&&c.push("documentMode_"+document.documentMode);
c.push(u.name);c.push(u.name+q(u.version));if(s.plugins.flash){c.push("flash");c.push("flash"+q(s.plugins.flash))}typeof window.webTop!="undefined"&&window.webTop&&c.push("webTop");g.className=c.join(" ")};i.browserOptions.htmlClass&&d();i.platform=r;i.browser=s;i.browser.engine=u});
Jx().$package(function(i){var h,p,t,r,s,u,k,d,l,q,g,c,a,b,f,e,m=null,n,w,z,A;i.dom=i.dom||{};h=i.dom;p=i.browser;t=h.win?h.win.contentWindow:h.win||window;h.win=t;h.doc=t.document;var x=document&&Object.prototype.hasOwnProperty.call(document.documentElement,"classList");w=function(){if(z)return z;return z=document.compatMode==="CSS1Compat"?document.documentElement:document.body};e=function(j){if(j){j=j||window.document;m=j.nodeType===9?j:j.ownerDocument||h.doc}else if(!m){j=j||window.document;m=j.nodeType===
9?j:j.ownerDocument||h.doc}return m};n=function(j){var o=e(j);return j.document?j:o.defaultView||o.parentWindow||h.win};t=function(j,o){o=o||e();return o.getElementsByTagName(j)};g=function(j){return(j?j.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))||0};c=function(j){return(j?j.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop))||0};r=function(){return x?function(j,o){if(!j||!o)return false;return j.classList.contains(o)}:function(j,
o){if(!j||!o)return false;return-1<(" "+j.className+" ").indexOf(" "+o+" ")}}();s=function(){return x?function(j,o){!j||!o||r(j,o)||j.classList.add(o)}:function(j,o){!j||!o||r(j,o)||(j.className+=" "+o)}}();u=function(){return x?function(j,o){!j||!o||!r(j,o)||j.classList.remove(o)}:function(j,o){if(!(!j||!o||!r(j,o)))j.className=j.className.replace(RegExp("(?:^|\\s)"+o+"(?:\\s|$)")," ")}}();k=function(){return x?function(j,o){j&&o&&j.classList.toggle(o)}:function(j,o){if(j&&o)r(j,o)?u(j,o):s(j,o)}}();
d=function(j,o,v){if(j){var y=i.browser.name;if(o==="float"||o==="cssFloat")o=y==="ie"?"styleFloat":"cssFloat";if(o==="opacity"&&y==="ie"&&i.browser.ie<9){j.style.filter='alpha(opacity="'+v*100+'")';if(!j.style.zoom)j.style.zoom=1}else j.style[o]=v}};l=function(j,o){if(j){var v=n(j),y=i.browser.name;if(o==="float"||o==="cssFloat")o=y==="ie"?"styleFloat":"cssFloat";if(o==="opacity"&&y==="ie"&&i.browser.ie<9){v=1;if((y=j.style.filter.match(/opacity=(\d+)/))&&y[1])v=y[1]/100;return v}if(j.style[o])return j.style[o];
else if(j.currentStyle)return j.currentStyle[o];else if(v.getComputedStyle)return v.getComputedStyle(j,null)[o];else if(document.defaultView&&document.defaultView.getComputedStyle){o=o.replace(/([/A-Z])/g,"-$1");o=o.toLowerCase();return(v=document.defaultView.getComputedStyle(j,""))&&v.getPropertyValue(o)}}};q=function(j,o){j.style.cssText=o};(function(){for(var j=document.createElement("a").style,o=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],v=o.length;v--;)if(o[v]in
j)return o[v]})();a=function(j){var o=0,v=0;if(j)if(document.documentElement.getBoundingClientRect&&j.getBoundingClientRect){v={left:0,top:0,right:0,bottom:0};try{v=j.getBoundingClientRect()}catch(y){return[0,0]}j=j.ownerDocument;var C=i.browser.ie?2:0;o=v.top-C+c(j);v=v.left-C+g(j)}else for(;j.offsetParent;){o+=j.offsetTop;v+=j.offsetLeft;j=j.offsetParent}return[v,o]};b=function(j){j=a(j);j[0]+=g();j[1]+=c();return j};f=function(j,o,v){var y=parseInt(l(j,"marginLeft"))||0,C=parseInt(l(j,"marginTop"))||
0;d(j,"left",parseInt(o)-y+"px");d(j,"top",parseInt(v)-C+"px")};for(var E=function(j){return!j||j=="auto"?0:parseInt(j.substr(0,j.length-2))},D=t("script"),B=0;B<D.length;B++)if(D[B].getAttribute("hasJx")=="true")i.src=D[B].src;if(!i.src)i.src=D[D.length-1].src;i.filename=i.src.replace(/(.*\/){0,}([^\\]+).*/ig,"$2");i.path=i.src.split(i.filename)[0];h.getDoc=e;h.id=function(j,o){return e(o).getElementById(j)};h.name=function(j,o){return e(o).getElementsByName(j)};h.tagName=t;h.getText=function(j){var o=
j?j[TEXT_CONTENT]:"";if(o===UNDEFINED&&INNER_TEXT in j)o=j[INNER_TEXT];return o||""};h.getAttributeByParent=function(j,o,v){var y=false;o=o;var C;do{C=o.getAttribute(j);if(i.isUndefined(C)||i.isNull(C))if(o===v)y=true;else o=o.parentNode;else y=true}while(!y);return C};h.node=function(j,o){var v,y=document.createElement(j),C={"class":function(){y.className=o["class"]},style:function(){q(y,o.style)}};for(v in o)C[v]?C[v]():y.setAttribute(v,o[v]);return y};h.setClass=function(j,o){j.className=o};h.getClass=
function(j){return j.className};h.hasClass=r;h.addClass=s;h.removeClass=u;h.toggleClass=k;h.replaceClass=function(j,o,v){u(j,o);s(j,v)};h.createStyleNode=function(j,o){var v=h.node("style",{id:o||"",type:"text/css"});h.getDocHead().appendChild(v);var y=typeof j;if(y=="string")if(v.styleSheet)v.styleSheet.cssText=j;else{y=document.createTextNode(j);v.appendChild(y)}else if(y=="object"){y=0;var C=document.styleSheets[document.styleSheets.length-1];for(selector in j)C.insertRule?C.insertRule(selector+
"{"+j[selector]+"}",y++):C.addRule(selector,j[selector],y++)}return v};h.setStyle=d;h.getStyle=l;h.setCssText=q;h.getCssText=function(j){return j.style.cssText};h.addCssText=function(j,o){j.style.cssText+=";"+o};h.show=function(j,o){var v;v=(v=j.getAttribute("_oldDisplay"))?v:l(j,"display");if(o)d(j,"display",o);else v==="none"?d(j,"display","block"):d(j,"display",v)};h.isShow=function(j){return l(j,"display")==="none"?false:true};h.recover=function(j){var o;o=(o=j.getAttribute("_oldDisplay"))?o:
l(j,"display");o==="none"?d(j,"display",""):d(j,"display",o)};h.hide=function(j){var o=l(j,"display");j.getAttribute("_oldDisplay")||(o==="none"?j.setAttribute("_oldDisplay",""):j.setAttribute("_oldDisplay",o));d(j,"display","none")};h.getScrollLeft=g;h.getScrollTop=c;h.getScrollHeight=function(j){return(j?j.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))||0};h.getScrollWidth=function(j){return(j?j.scrollWidth:Math.max(document.documentElement.scrollWidth,
document.body.scrollWidth))||0};h.getClientHeight=function(j){j=j||w();return j.clientHeight};h.getClientWidth=function(j){j=j||w();return j.clientWidth};h.getOffsetHeight=function(j){j=j||w();return j.offsetHeight};h.getOffsetWidth=function(j){j=j||w();return j.offsetWidth};h.getClientXY=a;h.setClientXY=function(j,o,v){o=parseInt(o)+g();v=parseInt(v)+c();f(j,o,v)};h.getXY=b;h.setXY=f;h.getRelativeXY=function(j,o){var v=b(j),y=b(o),C=[];C[0]=v[0]-y[0];C[1]=v[1]-y[1];return C};h.getPosX=function(j){return E(h.getStyle(j,
"left"))};h.getPosY=function(j){return E(h.getStyle(j,"top"))};h.getWidth=function(j){return E(h.getStyle(j,"width"))};h.getHeight=function(j){return E(h.getStyle(j,"height"))};h.getSelection=void 0;h.getSelectionText=function(j){j=j||window;var o=j.document;if(j.getSelection)return j.getSelection().toString();else if(o.getSelection)return o.getSelection();else if(o.selection)return o.selection.createRange().text};h.getTextFieldSelection=function(j){return j.selectionStart!=undefined&&j.selectionEnd!=
undefined?j.value.substring(j.selectionStart,j.selectionEnd):""};h.getDocumentElement=w;h.getDocHead=function(){if(!A){var j=e();A=j.getElementsByTagName("head")?j.getElementsByTagName("head")[0]:j.documentElement}return A};h.contains=function(j,o,v){if(!v&&j===o)return false;if(j.compareDocumentPosition){j=j.compareDocumentPosition(o);if(j==20||j==0)return true}else if(j.contains(o))return true;return false};h.getHref=function(j){return(p.ie&&p.ie<=7?j.getAttribute("href",4):j.href)||null}});
Jx().$package(function(i){var h,p,t,r,s,u,k=[],d,l,q,g,c;i.event=i.event||{};h=i.event;c=function(a,b){if(!a)a=window.event;b=b||a.srcElement;var f=document,e=f.documentElement;f=f.body;e={_event:a,type:a.type,target:a.srcElement,currentTarget:b,relatedTarget:a.fromElement?a.fromElement:a.toElement,eventPhase:a.srcElement==b?2:3,clientX:a.clientX,clientY:a.clientY,screenX:a.screenX,screenY:a.screenY,layerX:a.offsetX,layerY:a.offsetY,pageX:a.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||
f&&f.clientLeft||0),pageY:a.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0),wheelDelta:a.wheelDelta,altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,charCode:a.keyCode,keyCode:a.keyCode,stopPropagation:function(){this._event.cancelBubble=true},preventDefault:function(){this._event.returnValue=false}};f=a.type.toLowerCase();if(f=="mouseover")e.relatedTarget=a.fromElement;else if(f=="mouseout")e.relatedTarget=a.toElement;if(!i.isUndefined(a.button)){f=a.button;var m=
{0:-1,1:0,2:2,3:-1,4:1};e.button=i.isUndefined(m[f])?f:m[f]}return e};if(i.browser.ie){p=function(a,b,f,e){u["on"+b]?u["on"+b](a,b,f,e):t(a,b,f)};t=function(a,b,f){if(h._find(arguments)==-1){var e=function(w){w=c(w,a);if(Function.prototype.call)f.call(a,w);else{a._currentHandler=f;a._currentHandler(w);a._currentHandler=null}};a.attachEvent("on"+b,e);e={element:a,eventType:b,handler:f,wrappedEvent:e};var m=(a.document||a).parentWindow||window,n=h._uid();if(!m._allHandlers)m._allHandlers={};m._allHandlers[n]=
e;if(!a._handlers)a._handlers=[];a._handlers.push(n);if(!m._onunloadEventRegistered){m._onunloadEventRegistered=true;m.attachEvent("onunload",h._removeAllEvents)}}};r=function(a,b,f){if(u["off"+b])u["off"+b](a,b,f);else arguments.length==3?s(a,b,f):s(a,b)};s=function(a){var b=h._find(arguments);if(b!=-1){for(var f=(a.document||a).parentWindow||window,e=0;e<b.length;e++){var m=b[e],n=a._handlers[m],w=f._allHandlers[n];a.detachEvent("on"+w.eventType,w.wrappedEvent);a._handlers[m]=null;a._handlers.splice(m,
1);delete f._allHandlers[n]}if(a._handlers&&a._handlers.length==0)a._handlers=null}};h._find=function(a){var b=a[0],f=a[1],e=a[2],m=b._handlers;if(!m)return-1;b=(b.document||b).parentWindow||window;var n=[];if(a.length===3)for(a=m.length-1;a>=0;a--){var w=m[a];w=b._allHandlers[w];if(w.eventType==f&&w.handler==e){n.push(a);return n}}else if(a.length===2){for(a=m.length-1;a>=0;a--){w=m[a];w=b._allHandlers[w];w.eventType==f&&n.push(a)}if(n.length>0)return n}else if(a.length===1){for(a=m.length-1;a>=
0;a--)n.push(a);if(n.length>0)return n}return-1};h._removeAllEvents=function(){for(var a in this._allHandlers){var b=this._allHandlers[a];b.element.detachEvent("on"+b.eventType,b.wrappedEvent);b.element._handlers=null;delete this._allHandlers[a]}};h._counter=0;h._uid=function(){return"h"+h._counter++}}else if(document.addEventListener){p=function(a,b,f,e){u["on"+b]?u["on"+b](a,b,f,e):t(a,b,f)};t=function(a,b,f){var e=false;a||i.out("targetModel undefined:"+b+f);if(!a._eventTypes)a._eventTypes={};
a._eventTypes[b]||(a._eventTypes[b]=[]);a.addEventListener(b,f,false);a=a._eventTypes[b];for(b=0;b<a.length;b++)if(a[b]==f){e=true;break}e||a.push(f)};r=function(a,b,f){if(u["off"+b])u["off"+b](a,b,f);else arguments.length==3?s(a,b,f):s(a,b)};s=function(a,b,f){if(b)if(arguments.length==3){if(f){a.removeEventListener(b,f,false);if(a._eventTypes&&a._eventTypes[b])for(var e=a._eventTypes[b],m=0;m<e.length;m++)if(e[m]===f){e[m]=null;e.splice(m,1);break}}}else{if(a._eventTypes&&a._eventTypes[b]){e=a._eventTypes[b];
for(m=0;m<e.length;m++)a.removeEventListener(b,e[m],false);a._eventTypes[b]=[]}}else if(a._eventTypes){var n=a._eventTypes,w;for(w in n){e=a._eventTypes[w];for(m=0;m<e.length;m++)a.removeEventListener(w,e[m],false)}}}}u={ondrag:function(a,b,f){var e,m,n=false,w=function(x){if(!(!i.browser.mobileSafari&&x.button!==0)){if(i.browser.mobileSafari){x.stopPropagation();x=x.touches[0];e=x.pageX;m=x.pageY}else{x.stopPropagation();x.preventDefault();e=x.clientX;m=x.clientY}n=false;if(i.browser.mobileSafari){h.addEventListener(document,
"touchmove",z);h.addEventListener(a,"touchend",A)}else h.addEventListener(document,"mousemove",z)}},z=function(x){if(!(!i.browser.mobileSafari&&x.button!==0)){var E,D;x.stopPropagation();if(i.browser.mobileSafari){D=x.changedTouches[0];E=D.pageX;D=D.pageY}else{E=x.clientX;D=x.clientY}if(Math.abs(e-E)+Math.abs(m-D)>2){if(i.browser.mobileSafari){h.removeEventListener(document,"touchmove",z);h.removeEventListener(a,"touchend",A)}else h.removeEventListener(document,"mousemove",z);if(!n){f.call(a,x);n=
true}}}},A=function(x){if(!(!i.browser.mobileSafari&&x.button!==0))if(i.browser.mobileSafari){h.removeEventListener(document,"touchmove",z);if(n){x.stopPropagation();x.preventDefault()}}else h.removeEventListener(document,"mousemove",z)};if(i.browser.mobileSafari)h.addEventListener(a,"touchstart",w);else{h.addEventListener(a,"mousedown",w);h.addEventListener(a,"mouseup",A)}k.push({element:a,eventType:b,handler:f,actions:[w,A]})},offdrag:function(a,b,f){for(var e in k)if(k[e].handler==f&&k[e].element==
a&&k[e].eventType==b){if(i.browser.mobileSafari){h.removeEventListener(a,"touchstart",k[e].actions[0]);h.removeEventListener(a,"touchend",k[e].actions[1])}else{h.removeEventListener(a,"mousedown",k[e].actions[0]);h.removeEventListener(a,"mouseup",k[e].actions[1])}k.splice(e,1);break}},oncustomclick:function(a,b,f,e){var m,n,w=false,z=false,A;e=e?e:{};var x=e.longtouchable,E=-1;e=function(o){w=false;if(!(!i.browser.mobileSafari&&o.button!==0)){var v;if(i.browser.mobileSafari){v=o.changedTouches[0];
m=v.pageX;n=v.pageY}else{m=o.clientX;n=o.clientY}z=false;if(x)A=setTimeout(function(){if(!(w||z)){if(i.browser.mobileSafari){h.removeEventListener(a,"touchmove",B);h.removeOriginalEventListener(a,"touchend",j)}else{h.removeEventListener(a,"mousemove",B);h.removeOriginalEventListener(a,"click",j)}f.call(a,o,2E3)}},1E3);if(i.browser.mobileSafari){h.addEventListener(a,"touchmove",B);h.addOriginalEventListener(a,"touchend",j)}else{h.addEventListener(a,"mousemove",B);h.addOriginalEventListener(a,"click",
j)}}};var D=function(o){E=o.button;if(!(!i.browser.mobileSafari&&o.button!==0))if(i.browser.mobileSafari)touch=o.changedTouches[0]},B=function(o){if(i.browser.mobileSafari){touch=o.changedTouches[0];var v=touch.pageX;o=touch.pageY}else{v=o.clientX;o=o.clientY}if(w=Math.abs(m-v)+Math.abs(n-o)>1){clearTimeout(A);A=null;if(i.browser.mobileSafari){h.removeEventListener(a,"touchmove",B);h.removeOriginalEventListener(a,"touchend",j)}else{h.removeEventListener(a,"mousemove",B);h.removeOriginalEventListener(a,
"click",j)}}},j=function(o){clearTimeout(A);A=null;z=true;if(!(!i.browser.mobileSafari&&E!==0)){var v;if(i.browser.mobileSafari){v=o.changedTouches[0];var y=v.pageX;v=v.pageY}else{y=o.clientX;v=o.clientY}if(Math.abs(m-y)+Math.abs(n-v)<1){w=false;f.call(a,o,0)}}};if(i.browser.mobileSafari)h.addEventListener(a,"touchstart",e);else{h.addEventListener(a,"mousedown",e);h.addEventListener(a,"mouseup",D)}k.push({element:a,eventType:b,handler:f,actions:[e,B,D,j]})},offcustomclick:function(a,b,f){for(var e in k)if(k[e].handler==
f&&k[e].element==a&&k[e].eventType==b){if(i.browser.mobileSafari){h.removeEventListener(a,"touchstart",k[e].actions[0]);h.removeEventListener(a,"touchmove",k[e].actions[1]);h.removeOriginalEventListener(a,"touchend",k[e].actions[3])}else{h.removeEventListener(a,"mousedown",k[e].actions[0]);h.removeEventListener(a,"mousemove",k[e].actions[1]);h.removeEventListener(a,"mouseup",k[e].actions[2]);h.removeOriginalEventListener(a,"click",k[e].actions[3])}k.splice(e,1);break}},oncontextmenu:function(a,b,
f){if(i.browser.ie==9){var e=function(m){m=c(m,a);f.call(a,m)};a.attachEvent("oncontextmenu",e);k.push({element:a,eventType:b,handler:f,actions:[e]})}else h.addOriginalEventListener(a,b,f)},offcontextmenu:function(a,b,f){if(i.browser.ie==9)for(var e in k){if(k[e].handler==f&&k[e].element==a&&k[e].eventType==b){a.detachEvent("oncontextmenu",k[e].actions[0]);k.splice(e,1);break}}else h.removeOriginalEventListener(a,b,f)},onmousewheel:function(a,b,f){if(i.browser.firefox){var e=function(m){m.wheelDelta=
-40*m.detail;f.call(a,m)};h.addOriginalEventListener(a,"DOMMouseScroll",e);k.push({element:a,eventType:b,handler:f,actions:[e]})}else h.addOriginalEventListener(a,"mousewheel",f)},offmousewheel:function(a,b,f){if(i.browser.firefox)for(var e in k){if(k[e].handler==f&&k[e].element==a&&k[e].eventType==b){h.removeOriginalEventListener(a,"DOMMouseScroll",k[e].actions[0]);k.splice(e,1);break}}else h.removeOriginalEventListener(a,"mousewheel",f)},onmouseenter:function(a,b,f){var e=function(m){var n=m.relatedTarget;
if(n)if(this.compareDocumentPosition){var w=this.compareDocumentPosition(n);n==this||w==20||w==0||f.call(this,m)}else n==this||this.contains(n)||f.call(this,m);else f.call(this,m)};h.addEventListener(a,"mouseover",e);k.push({element:a,eventType:b,handler:f,actions:[e]})},offmouseenter:function(a,b,f){for(var e in k)if(k[e].handler==f&&k[e].element==a&&k[e].eventType==b){h.removeEventListener(a,"mouseover",k[e].actions[0]);k.splice(e,1);break}},onmouseleave:function(a,b,f){var e=function(m){var n=
m.relatedTarget;if(n)if(this.compareDocumentPosition){n=this.compareDocumentPosition(n);n==20||n==0||f.call(this,m)}else this.contains(n)||f.call(this,m);else f.call(this,m)};h.addEventListener(a,"mouseout",e);k.push({element:a,eventType:b,handler:f,actions:[e]})},offmouseleave:function(a,b,f){for(var e in k)if(k[e].handler==f&&k[e].element==a&&k[e].eventType==b){h.removeEventListener(a,"mouseout",k[e].actions[0]);k.splice(e,1);break}},oninput:function(a,b,f){if(i.browser.ie){var e=function(m){if(m.propertyName.toLowerCase()==
"value"){m=c(m,a);f.call(a,m)}};a.attachEvent("onpropertychange",e);k.push({element:a,eventType:b,handler:f,actions:[e]});i.browser.ie==9&&h.addOriginalEventListener(a,"change",f)}else h.addOriginalEventListener(a,"input",f)},offinput:function(a,b,f){if(i.browser.ie){for(var e in k)if(k[e].handler==f&&k[e].element==a&&k[e].eventType==b){a.detachEvent("onpropertychange",k[e].actions[0]);k.splice(e,1);break}i.browser.ie==9&&h.removeOriginalEventListener(a,"change",f)}else h.removeOriginalEventListener(a,
"input",f)}};d=function(a){if(d.done)return a();if(d.timer)d.ready.push(a);else{d.ready=[a];h.on(window,"load",l);d.timer=window.setInterval(l,300)}};l=function(){if(d.done)return true;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){d.done=true;window.clearInterval(d.timer);d.timer=null;for(var a=0;a<d.ready.length;a++)d.ready[a]();d.ready=null;return true}};q=function(){this.subscribers=[]};q.prototype.subscribe=function(a){i.array.some(this.subscribers,function(b){return b===
a})||this.subscribers.push(a);return a};q.prototype.deliver=function(a){i.array.forEach(this.subscribers,function(b){b(a)})};q.prototype.unsubscribe=function(a){this.subscribers=i.array.filter(this.subscribers,function(b){return b!==a});return a};g=function(a,b,f){var e,m;if(f){b="on"+b;if(!a._$events)a._$events={};if(a._$events[b]){if(a._$events[b].length==0)a._$events[b]=[]}else a._$events[b]=[];a=a._$events[b];b=a.length;e=-1;for(m=0;m<b;m++)if(a[m]==f){e=m;break}e===-1&&a.push(f)}else i.out(">>> \u6dfb\u52a0\u7684\u89c2\u5bdf\u8005\u65b9\u6cd5\u4e0d\u5b58\u5728\uff1a"+
a+b+f)};h.addEventListener=p;h.removeEventListener=r;h.addOriginalEventListener=t;h.removeOriginalEventListener=s;h.on=h.addEventListener;h.off=h.removeEventListener;h.onDomReady=d;h.Publish=q;h.addObserver=g;h.addObservers=function(a){var b=a.targetModel;a=a.eventMapping;for(var f in a)g(b,f,a[f])};h.notifyObservers=function(a,b,f){var e;b="on"+b;var m=true;if(a._$events&&a._$events[b]){b=a._$events[b];if(b.length>0)for(e=0;e<b.length;e++)if(b[e].apply(a,[f])===false)m=false}return m};h.removeObserver=
function(a,b,f){var e,m=false,n,w=a._$events;if(f){if(w){b="on"+b;if(a=w[b]){n=a.length;for(e=0;e<n;e++)if(a[e]==f){a[e]=null;a.splice(e,1);m=true;break}}}}else if(b){if(w){b="on"+b;if(a=w[b]){n=a.length;for(e=0;e<n;e++)a[e]=null;delete w[b];m=true}}}else if(a)if(w){for(e in w)delete w[e];delete a._$events;m=true}return m}});
Jx().$package(function(i){i.string=i.string||{};var h=i.string,p,t,r,s,u,k,d,l,q,g;p=function(){function c(B){m="var ";n={};n[e]=1;B=B.split(b);for(var j="",o=0,v=B.length;o<v;o++){var y=B[o].split(f);if(y.length==1)j+=a(y[0]);else{j=j;var C=y[0];if(/^=/.test(C))C=w[1]+C.substring(1).replace(/[\s;]*$/,"")+w[2];var G=C;G=G.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,"");G=G.split(/[^\$\w\d]+/);for(var H=0,I=G.length;H<I;H++){var F=G[H];if(!(!F||A[F]||/^\d/.test(F)))if(!n[F]){m+=F==="print"?w[4]:
F+'=$data.hasOwnProperty("'+F+'")?$data.'+F+":window."+F+",";n[F]=1}}j=j+(C+"\n");j+=y[1]?a(y[1]):""}}return new Function("$data",m+w[0]+j+"return "+w[3])}function a(B){B=B.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");B=w[1]+'"'+B+'"'+w[2];return B+"\n"}for(var b="<%",f="%>",e="$return",m="var ",n,w="".trim?[e+' = "";',e+" +=",";",e+";","print=function(){"+e+'+=[].join.call(arguments,"")},']:[e+" = [];",e+".push(",")",e+'.join("");',"print=function(){"+e+".push.apply(arguments)},"],
z="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),A={},x=0,E=z.length;x<E;x++)A[z[x]]=1;var D={};return function(B,j){var o=!/\W/.test(B)?
D[B]||(D[B]=c(document.getElementById(B).innerHTML)):c(B);return j?o(j):o}}();t=function(c){return t.RE.test(c)};t.RE=/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i;r=function(c){var a=null;if(null!==(a=r.RE.exec(c))){c={};for(var b=0,f=r.SPEC.length;b<f;b++)c[r.SPEC[b]]=a[b+1];a=c}return a};r.SPEC=["scheme","user","pass","host","port","path","query","fragment"];r.RE=/^([^:]+):\/\/(?:([^:@]+):?([^@]*)@)?(?:([^/?#:]+):?(\d*))([^?#]*)(?:\?([^#]+))?(?:#(.+))?$/;s=function(c){return String(c).replace(/^\s+|\s+$/g,
"")};u=function(c,a){return encodeURIComponent(String(c))+"="+encodeURIComponent(String(a))};k=function(c,a){a=a||2;return c.replace(/[^\x00-\xff]/g,{2:"aa",3:"aaa"}[a]).length};d=function(c,a){return c.substring(0,c.length-a)};l=function(c){return c.replace(/[&'"<>\/\\\-\x00-\x09\x0b-\x0c\x1f\x80-\xff]/g,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")};q=function(c){return escape(c).replace(/\+/g,"%2B")};
g=function(c,a){var b=document.createElement("div");b.style.visibility="hidden";b.style.width="auto";if(a)b.style.fontSize=a+"px";b.style.position="absolute";b.innerHTML=i.string.encodeHtmlSimple(c);document.body.appendChild(b);var f=b.offsetWidth;document.body.removeChild(b);return f};h.cutByWidth=function(c,a,b){for(var f=c.length;f>=0;--f){c=c.substring(0,f);if(g(c,a)<b)return c}return""};h.toString=function(c){return c+""};h.template=p;h.isURL=t;h.parseURL=r;h.buildURL=function(c){for(var a="",
b={},f={},e=0,m=r.SPEC.length;e<m;e++){var n=r.SPEC[e];if(c[n]){switch(n){case "scheme":f[n]="://";break;case "pass":b[n]=":";case "user":b.host="@";break;case "port":b[n]=":";break;case "query":b[n]="?";break;case "fragment":b[n]="#"}if(n in b)a+=b[n];if(n in c)a+=c[n];if(n in f)a+=f[n]}}return a};h.mapQuery=function(c){var a,b;c=c&&c.split("#")[0]||window.location.search;var f=c.indexOf("?"),e=c.substring(f+1).split("&"),m={};if(f===-1)return m;for(c=0;c<e.length;c++)try{f=e[c].indexOf("=");a=e[c].substring(0,
f);b=e[c].substring(f+1);if(!(m[a]=unescape(b)))throw Error("uri has wrong query string when run mapQuery.");}catch(n){}return m};h.test=function(c,a,b){return(typeof a=="string"?RegExp(a,b):a).test(c)};h.contains=function(c,a,b){return b?(b+c+b).indexOf(b+a+b)>-1:c.indexOf(a)>-1};h.trim=s;h.clean=function(c){return s(c.replace(/\s+/g," "))};h.camelCase=function(c){return c.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})};h.hyphenate=function(c){return c.replace(/[A-Z]/g,function(a){return"-"+
a.charAt(0).toLowerCase()})};h.capitalize=function(c){return c.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})};h.escapeRegExp=function(c){return c.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")};h.toInt=function(c,a){return parseInt(c,a||10)};h.toFloat=function(c){return parseFloat(c)};h.toSingleLine=function(c){return String(c).replace(/\r/gi,"").replace(/\n/gi,"")};h.toHtml=function(c){return String(c).replace(/&/gi,"&amp;").replace(/\\/gi,"&#92;").replace(/\'/gi,"&#39;").replace(/\"/gi,"&quot;").replace(/</gi,
"&lt;").replace(/>/gi,"&gt;").replace(/ /gi,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n\r/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")};h.toTitle=function(c){return String(c).replace(/\\/gi,"\\").replace(/\'/gi,"'").replace(/\"/gi,"'")};h.toQueryPair=u;h.toQueryString=function(c){var a=[],b;for(b in c)a.push(u(b,c[b]));return a.join("&")};h.hexToRgb=function(c,a){var b=c.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return b?b.slice(1).hexToRgb(a):null};h.rgbToHex=function(c,a){var b=
c.match(/\d{1,3}/g);return b?b.rgbToHex(a):null};h.stripScripts=function(c,a){var b="",f=c.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(e,m){b+=m+"\n";return""});if(a===true)$exec(b);else $type(a)=="function"&&a(b,f);return f};h.substitute=function(c,a,b){return c.replace(b||/\\?\{([^{}]+)\}/g,function(f,e){if(f.charAt(0)=="\\")return f.slice(1);return a[e]!=undefined?a[e]:""})};h.replaceAll=function(c,a,b,f){return RegExp.prototype.isPrototypeOf(a)?c.replace(a,b):c.replace(RegExp(a,f?"gi":
"g"),b)};h.byteLength=k;h.cutRight=d;h.isNumber=function(c){return c.search(/^\d+$/)!==-1?true:false};h.isEmail=function(c){return c.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!==-1?true:false};h.cutByBytes=function(c,a){for(var b=c;k(b)>a;)b=d(b,1);return b};h.encodeHtmlSimple=function(c){c=c.replace(/&/g,"&amp;");c=c.replace(/>/g,"&gt;");c=c.replace(/</g,"&lt;");c=c.replace(/"/g,"&quot;");return c=c.replace(/'/g,"&#39;")};h.decodeHtmlSimple=function(c){c=c.replace(/&amp;/g,
"&");c=c.replace(/&gt;/g,">");c=c.replace(/&lt;/g,"<");c=c.replace(/&quot;/g,'"');return c=c.replace(/&#39;/g,"'")};h.decodeHtmlSimple2=function(c){c=c.replace(/&amp;/g,"&");c=c.replace(/&gt;/g,">");c=c.replace(/&lt;/g,"<");c=c.replace(/\\\\"/g,'"');return c=c.replace(/\\\\'/g,"'")};h.encodeHtmlAttributeSimple=function(c){c=c.replace(/&/g,"&amp;");c=c.replace(/>/g,"&gt;");c=c.replace(/</g,"&lt;");c=c.replace(/"/g,"&quot;");c=c.replace(/'/g,"&#39;");c=c.replace(/=/g,"&#61;");return c=c.replace(/`/g,
"&#96;")};h.encodeHtmlAttribute=function(c){return c.replace(/[&'"<>\/\\\-\x00-\x1f\x80-\xff]/g,function(a){return"&#"+a.charCodeAt(0)+";"})};h.encodeHtml=l;h.encodeScript=function(c){c+="";return c.replace(/[\\"']/g,function(a){return"\\"+a}).replace(/%/g,"\\x25").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\x01/g,"\\x01")};h.encodeHrefScript=function(c){return l(q(escScript(c)))};h.encodeRegExp=function(c){return c.replace(/[\\\^\$\*\+\?\{\}\.\(\)\[\]]/g,function(a){return"\\"+a})};h.encodeUrl=
q;h.encodeUriComponent=function(c){c=encodeURIComponent(c);c=c.replace(/~/g,"%7E");c=c.replace(/!/g,"%21");c=c.replace(/\*/g,"%2A");c=c.replace(/\(/g,"%28");c=c.replace(/\)/g,"%29");c=c.replace(/'/g,"%27");c=c.replace(/\?/g,"%3F");return c=c.replace(/;/g,"%3B")};h.vaildTencentUrl=function(c){return/^(https?:\/\/)?[\w\-.]+\.(qq|paipai|soso|taotao)\.com($|\/|\\)/i.test(c)||/^[\w][\w\/\.\-_%]+$/i.test(c)||/^[\/\\][^\/\\]/i.test(c)?true:false};h.vaildUrl=function(c){c=encodeURI(c).replace(/(^\s*)|(\s*$)/g,
"");var a=/(^[a-zA-Z0-9]+[^.]):/,b=/^[\S.]+\.[\S.]+$/,f=/[\w.]+\/(\S*)/,e=/^[\s*]*javascript[\s*]*:/;if(!a.test(c)&&!b.test(c))c="";else{a.test(c)||(c="http://"+c);f.test(c)||(c+="/");if(e.test(c))c=""}return c};h.getCharWidth=g});
Jx().$package(function(i){var h=i.dom.id,p=i.dom,t=i.event,r=i.string,s=this,u=i.string.mapQuery(window.location.search),k=new i.Class({_defaultType:3,_defaultTag:"information",_defaultTemplate:"<%=msg%>(<%=type%>#<%=tag%>@<%=time%>)",TYPE:["PROFILE","WARNING","ERROR","INFO","DEBUG"],init:function(d){this.msg=d.msg||"";this.tag=d.tag||this._defaultTag;this.type=i.isUndefined(d.type)?this._defaultType:d.type;this.time=(new Date).valueOf();this._template=d.template||this._defaultTemplate},format:function(d,
l,q){q=q||this._template;return l?r.encodeHtml(r.template(q,d)):r.template(q,d)},parseOption:function(){return{msg:this.msg,time:this.time,type:this.TYPE[this.type],tag:this.tag}},toString:function(d,l){return this.format(this.parseOption(),d,l||this._template)}});i.config={debugLevel:1};i.console={};i.Report={receive:i.emptyFunc,addRule:i.emptyFunc};i.extend(i.console,{_isCreated:false,_maxLength:1E3,_html:'<div id="ConsoleBoxHead" class="consoleBoxHead">                        <a href="###" id="ConsoleCloseButton" class="consoleCloseButton" title="\u5173\u95ed">X</a>                        <a href="###" id="ConsoleClearButton" class="consoleCloseButton" title="\u6e05\u9664\u6240\u6709\u65e5\u5fd7">C</a>                        <a href="###" id="ConsoleRefreshButton" class="consoleCloseButton" title="\u8fd8\u539f\u6240\u6709\u65e5\u5fd7">R</a>                        <a href="###" id="ConsoleHelpButton" class="consoleCloseButton" title="\u63a7\u5236\u53f0\u5e2e\u52a9">H</a>                        <h5 class="title" title="\u63a7\u5236\u53f0">Console</h5>                    </div>                    <div id="consoleMain" class="consoleMain">                        <ul id="ConsoleOutput" class="consoleOutput"></ul>                    </div>                    <div class="consoleInputBox">                        &gt;<input id="ConsoleInput" class="consoleInput" title="\u8bf7\u8f93\u5165\u63a7\u5236\u53f0\u6307\u4ee4\u6216\u8005Javascript\u8bed\u53e5..." />                    </div>',
_cssText:'                        html{                            _background:url(about:blank);                        }                                                .consoleBox{                            display:none;                            position:fixed;                            _position: absolute;                            _top:expression(documentElement.scrollTop+documentElement.clientHeight-this.offsetHeight);                            _left:expression(documentElement.scrollLeft+documentElement.clientWidth-this.offsetWidth-200);                            right: 200px;                            bottom: 30px;                            z-index: 10000000;                            border: 2px solid #bbb;                            padding: 5px;                            width: 300px;                            height:310px;                            background: #000;                            box-shadow: 1px 1px 20px rgba(0, 0, 0, 0.75);                            filter: Alpha(opacity:75);                            font-family: "Courier New", Consolas, "LucidaConsole", Monaco, monospace;                            font-size: 12px;                            color: #fff;                        }                                                html.webkit .consoleBox{                            background: rgba(0,0,0,0.75);                        }                                                .consoleBoxHead{                            height:20px;                            background: rgba(255,255,255,0.15);                            overflow:hidden;                            cursor:default;                            padding: 2px;                        }                                                .consoleBoxHead .title{                            margin:0;                            padding: 0 0 0 3px;                            height:20px;                            line-height:20px;                            font-family: Verdana;                        }                                                .consoleBoxHead .consoleCloseButton{                            float:right;                            border:0px solid #000;                            width:20px;                            height:18px;                            line-height:16px;                            background: white;                            margin:1px 1px;                            padding:0px;                            color:#666;                            font-family: Verdana;                            font-weight:bold;                            cursor:pointer;                            border-radius:3px;                            -moz-border-radius:3px;                            -webkit-border-radius:3px;                            text-align:center;                            text-decoration:none;                        }                                                .consoleBoxHead .consoleCloseButton:hover{                            background: orange;                            color:white;                            text-decoration:none;                        }                                                #ConsoleCloseButton:hover{                            background: red;                        }                                                #ConsoleClearButton:hover{                            background: blue;                        }                                                #ConsoleRefreshButton:hover{                            background: green;                        }                                                .consoleMain{                            position:relative;                            top:2px;                            bottom:0px;                            width:100%;                            height:255px;                            overflow:auto;                        }                        html.mobileSafari .consoleMain{                            overflow:hidden;                        }                                                ul.consoleOutput{                            display:block;                            margin:0;                            padding:0;                            width:100%;                            list-style:none;                        }                                                ul.consoleOutput li{                            list-style:none;                            padding:3px;                            border-bottom:1px solid #333333;                            word-break: break-all;                            word-wrap: break-word;                            overflow: hidden;                            zoom: 1;                        }                                                .consoleOutput .log_icon{                            width:13px;                            height:13px;                            background:#fff;                            overflow:hidden;                            float:left;                            margin-top:2px;                            font-weight:bold;                            text-align:center;                            font-size:12px;                            color:#8B8B8B;                            line-height:135%;                            cursor:default;                            border-radius:3px;                            -moz-border-radius:3px;                            -webkit-border-radius:3px;                        }                                                .consoleOutput .log_text{                            margin: 0px 0px 0px 20px;                            line-height:150%;                            zoom: 1;                        }                                                .log_error_type{}                                                .log_error_type .log_icon{                            background:#FF0000;                            color:#660000;                        }                                                .log_error_type .log_text{                            color:#FF0000;                        }                                                .log_warning_type{}                                                .log_warning_type .log_icon{                            background:#FFFF00;                            color:#8C7E00;                        }                                                .log_warning_type .log_text{                            color:#FFFF00;                        }                                                .log_debug_type{}                                                .log_debug_type .log_icon{                            background:#33CC00;                            color:#006600;                        }                                                .log_debug_type .log_text{                            color:#33cc00;                        }                                                .log_info_type{}                                                .log_info_type .log_icon{                            background:#0066FF;                            color:#000066                        }                                                .log_info_type .log_text{                            color:#0066FF;                        }                                                .log_profile_type{}                                                .log_profile_type .log_icon{                        }                                                .log_profile_type .log_text{                            color:white;                        }                                                #JxConsole .consoleInputBox{                            font-family: Verdana;                            font-size:12px;                            margin:5px 0;                            padding:2px 0;                            border-top:1px solid #aaa;                            width:100%;                            color:#CCFF00;                        }                                                #JxConsole  input.consoleInput{                            border:0px solid #666;                            background:transparent;                            color:#CCFF00;                            font-family: "Courier New", Consolas, "LucidaConsole", Monaco, monospace;                            font-size:12px;                            width:285px;                            height:25px;                            margin-left:3px;                            outline:none;                        }                         ',
_opened:false,_log_record:[],_cmd_history:[],_cmd_last_index:0,isCustomConsole:true,_templateArr:["<%=msg%>","<%=msg%>(<%=type%>#<%=tag%>@<%=time%>)"],_templateType:0,_typeInfo:[["log_profile_type","\u2514"],["log_warning_type","!"],["log_error_type","x"],["log_info_type","i"],["log_debug_type","\u221a"]],TYPE:{PROFILE:0,WARNING:1,ERROR:2,INFO:3,DEBUG:4},show:function(){this._isCreated||this._create();this._opened=true;this._main.style.display="block";this.render();window.setTimeout(i.bind(this.focusCommandLine,
this),0)},hide:function(d){d&&d.preventDefault();this.clear();i.console._main.style.display="none";i.console._opened=false},enable:function(){i.option.console=true;this.show()},disable:function(){i.option.console=false;this.hide()},_init:function(){t.on(document,"keydown",i.bind(this.handleDocumentKeydown,this));i.option.console&&this.show();this.setToDebug()},_create:function(){p.createStyleNode(this._cssText);this._main=document.createElement("div");this._main.id="JxConsole";this._main.style.display=
"none";this._main.className="consoleBox";this._main.innerHTML=this._html;window.document.body.appendChild(this._main);var d=p.getClientWidth(),l=p.getClientHeight();d=d-210-300;p.setStyle(this._main,"top",l-50-310+"px");p.setStyle(this._main,"left",d+"px");this._headEl=h("ConsoleBoxHead");this._inputEl=h("ConsoleInput");this._closeButtonEl=h("ConsoleCloseButton");this._clsButtonEl=h("ConsoleClearButton");this._refreshButtonEl=h("ConsoleRefreshButton");this._helpButtonEl=h("ConsoleHelpButton");this._outputEl=
h("ConsoleOutput");this._consoleMainEl=h("consoleMain");i.ui&&i.ui.Drag&&new i.ui.Drag(this._headEl,this._main);t.on(this._inputEl,"keyup",i.bind(this.onInputKeyup,this));t.on(this._clsButtonEl,"click",i.bind(this.clear,this));t.on(this._refreshButtonEl,"click",i.bind(this.refresh,this));t.on(this._helpButtonEl,"click",i.bind(this.help,this));t.on(this._closeButtonEl,"click",i.bind(this.hide,this));l={hScrollbar:true,vScrollbar:true,checkDOMChanges:false,desktopCompatibility:true};if(i.browser.mobileSafari)if(i.ui&&
i.ui.iScroll&&!this.consoleScroller){this.consoleScroller=new i.ui.iScroll(this._outputEl,l);i.debug("!!!!2","console")}this._isCreated=true},handleDocumentKeydown:function(d){switch(d.keyCode){case 192:if(d.ctrlKey&&d.shiftKey){this.toggleShow();d.preventDefault()}}},focusCommandLine:function(){this._inputEl.focus()},toggleShow:function(){this._opened?this.hide():this.show()},outConsoleShow:function(d,l){this.outConsole(d,l);!this._opened&&i.option.console&&this.show()},outConsole:function(d){if(this._opened){var l=
document.createElement("li");this._outputEl.appendChild(l);var q=i.console._typeInfo[d.type]||i.console._typeInfo[0],g=this._templateArr[this._templateType];l.className=q[0];l.innerHTML='<div class="log_icon" title="'+q[0]+'">'+q[1]+'</div><div class="log_text">'+d.toString(true,g)+"</div>";this.consoleScroller&&this.consoleScroller.refresh();this._consoleMainEl.scrollTop=this._consoleMainEl.scrollHeight}},print:function(d){var l=document.createElement("li");this._outputEl.appendChild(l);l.innerHTML=
d;this._consoleMainEl.scrollTop=this._consoleMainEl.scrollHeight},out:function(d,l,q){var g=this._templateArr[this._templateType];d=new k({msg:d,tag:l,type:q});this.logRecord(d);if(u&&u.consolefilter){if(d.tag==u.consolefilter)this.isCustomConsole?this.outConsole(d):s.console.log(d.toString(false,g))}else this.isCustomConsole?this.outConsole(d):s.console.log(d.toString(false,g))},profile:function(d,l){l=l||"system";this.out(d,l,0)},warn:function(d,l){this.out(d,l,1)},error:function(d,l){this.out(d,
l,2)},info:function(d,l){this.out(d,l,3)},debug:function(d,l){this.out(d,l,4)},setToDebug:function(){this.isCustomConsole=u.console&&u.console=="firebug"?false:true},setToNoDebug:function(){this.out=i.emptyFunc},logRecord:function(d){this._log_record.push(d);u.console||this._log_record.length>this._maxLength&&this._log_record.shift()},setTemplate:function(d){if(this._templateArr[d])this._templateType=d},filter:function(d){var l=RegExp(d,"i"),q=[];i.array.forEach(this._log_record,function(g){var c=
g.toString(true);l.test(c)&&q.push(g)});return q},filterByType:function(d,l){var q=[];d=d||[];i.array.forEach(d,function(g){var c=false;i.array.forEach(l,function(a){if(g.type==a)c=true});c&&q.push(g)});return q},filterByTag:function(d,l){var q=[];d=d||[];i.array.forEach(d,function(g){var c=false;i.array.forEach(l,function(a){if(g.tag==a)c=true});c&&q.push(g)});return q},filterByMsg:function(d,l){var q=[];d=d||[];i.array.forEach(d,function(g){var c=false;i.array.forEach(l,function(a){if(g.msg.indexOf(a)>
-1)c=true});c&&q.push(g)});return q},getReport:function(d,l,q){var g=[],c=this._log_record,a=this;if(!d||d=="")d=false;else i.isArray(d)||(d=[d]);if(!l||l=="")l=false;else i.isArray(l)||(l=[l]);if(!q||q=="")q=false;else i.isArray(q)||(q=[q]);if(d)c=this.filterByType(c,d);if(l)c=this.filterByTag(c,l);if(q)c=this.filterByMsg(c,q);i.array.forEach(c,function(b){g.push(b.toString(false,a._templateArr[1]))});return g.join(",")},render:function(d,l){d=d||this._log_record;l||(d=d.slice(-15));var q=this;q.clear();
i.array.forEach(d,function(g){q.outConsole(g)})},clear:function(d){d&&d.preventDefault();i.console._outputEl.innerHTML=""},refresh:function(d){d&&d.preventDefault();this.clear();this.render()},help:function(d){d&&d.preventDefault();this.print("&lt;&lt; Console Help &gt;&gt;<br/>                                help|h  : \u63a7\u5236\u53f0\u5e2e\u52a9<br/>                                clear|cls : \u6e05\u7a7a\u63a7\u5236\u53f0\u8f93\u51fa<br/>                                refresh|r : \u5237\u65b0\u63a7\u5236\u53f0\u8f93\u51fa<br/>                                filter|f : \u8fc7\u6ee4\u63a7\u5236\u53f0\u8f93\u51fa<br/>                                setTemplate|s : \u8bbe\u7f6e\u8f93\u51fa\u6a21\u7248\u7c7b\u578b<br/>                                hide  : \u9690\u85cf\u63a7\u5236\u53f0\uff0c\u6216\u8005\u4f7f\u7528 Ctrl+Shift+`[~] \u5feb\u6377\u952e")},
onInputKeyup:function(d){switch(d.keyCode){case 13:this._cmd_history.push(i.console._inputEl.value);this._cmd_last_index=this._cmd_history.length;this._execCommand(i.console._inputEl.value);break;case 38:if(this._cmd_history.length==0)break;d="";if(this._cmd_last_index>0){this._cmd_last_index--;d=this._cmd_history[this._cmd_last_index]}else this._cmd_last_index=-1;i.console._inputEl.value=d;break;case 40:if(this._cmd_history.length==0)break;d="";if(this._cmd_last_index<this._cmd_history.length-1){this._cmd_last_index++;
d=this._cmd_history[this._cmd_last_index]}else this._cmd_last_index=this._cmd_history.length;i.console._inputEl.value=d}},_execCommand:function(d){if(d=="help"||d=="h")this.help();else if(d=="clear"||d=="cls")i.console.clear();else if(d=="hide")i.console.hide();else if(d=="refresh"||d=="r")this.refresh();else if(d=="showall"||d=="sa"){this.clear();this.render(null,true)}else if(RegExp(/^(?:filter|f)(?:\(|\s+)(.+)(?:\)|\s*)$/i).test(d)){d=eval("this.filter('"+RegExp.$1+"')");if(d.length>0)this.render(d,
true);else{this.clear();this.out("NO RESULT!",1)}}else if(RegExp(/^(?:setTemplate|s)(?:\(|\s+)(\d+)(?:\)|\s*)$/i).test(d)){this.setTemplate(parseInt(RegExp.$1));this.refresh()}else this._execScript(d);i.console._inputEl.value=""},_execScript:function(d){var l='<span style="color:#ccff00">'+d+"</span><br/>";try{l+=(eval(d)||"").toString().replace(/</g,"&lt;").replace(/>/g,"&gt;");i.console.print(l,0)}catch(q){l+=q.description;i.console.print(l,1)}}});i.profile=i.console.profile;i.warn=i.console.warn;
i.error=i.console.error;i.info=i.console.info;i.log=i.console.log=i.console.info;i.debug=i.console.debug;t.onDomReady(function(){i.console._init();if(u.console=="true"){i.console=i.extend(i.console,{profile:i.emptyFunc,warn:i.emptyFunc,error:i.emptyFunc,info:i.emptyFunc,debug:i.emptyFunc});i.console.show()}});i.runtime=function(){function d(){return i.config.debugLevel>0}function l(g,c){var a;if(d())a=g+"\n=STACK=\n"+q();else if(c=="error")a=g;i.Debug.errorLogs.push(a)}function q(g,c){function a(e,
m){if(e.stack)return e.stack;else if(e.message.indexOf("\nBacktrace:\n")>=0){var n=0;return e.message.split("\nBacktrace:\n")[1].replace(/\s*\n\s*/g,function(){n++;return n%2==0?"\n":" @ "})}else{for(var w=m.callee==q?m.callee.caller:m.callee,z=w.arguments,A=[],x=0,E=z.length;x<E;x++)A.push(typeof z[x]=="undefined"?"<u>":z[x]===null?"<n>":z[x]);z=/function\s+([^\s\(]+)\(/;return((z.test(w.toString())?z.exec(w.toString())[1]:"<ANON>")+"("+A.join()+");").replace(/\n/g,"")}}var b;if(g instanceof Error&&
typeof arguments=="object"&&arguments.callee)b=a(g,c);else try{({}).sds()}catch(f){b=a(f,arguments)}return b.replace(/\n/g," <= ")}return{stack:q,warn:function(){l(write.apply(null,arguments),"warn")},error:function(){l(write.apply(null,arguments),"error")},isDebugMode:d}}()});
Jx().$package(function(i){var h=window.location.host;i.cookie={set:function(p,t,r,s,u){if(u){var k=new Date;k.setTime((new Date).getTime()+36E5*u)}window.document.cookie=p+"="+t+"; "+(u?"expires="+k.toGMTString()+"; ":"")+(s?"path="+s+"; ":"path=/; ")+(r?"domain="+r+";":"domain="+h+";");return true},get:function(p){p=window.document.cookie.match(RegExp("(?:^|;+|\\s+)"+p+"=([^;]*)"));return!p?"":p[1]},remove:function(p,t,r){window.document.cookie=p+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(r?"path="+
r+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+h+";")}}});Jx().$package(function(i){i.localStorage={setItem:function(h,p){this.isSupports()&&window.localStorage.setItem(h,p)},getItem:function(h){if(this.isSupports())return window.localStorage.getItem(h);return null},removeItem:function(h){this.isSupports()&&window.localStorage.removeItem(h)},clear:function(){this.isSupports()&&window.localStorage.clear()},isSupports:function(){return"localStorage"in window&&window.localStorage!==null}}});
Jx().$package(function(i){i.format=i.format||{};i.format.date=function(h,p){var t={"M+":h.getMonth()+1,"D+":h.getDate(),"h+":h.getHours(),"m+":h.getMinutes(),"s+":h.getSeconds(),"q+":Math.floor((h.getMonth()+3)/3),S:h.getMilliseconds()};if(/(Y+)/.test(p))p=p.replace(RegExp.$1,(h.getFullYear()+"").substr(4-RegExp.$1.length));for(var r in t)if(RegExp("("+r+")").test(p))p=p.replace(RegExp.$1,RegExp.$1.length==1?t[r]:("00"+t[r]).substr((""+t[r]).length));return p};i.format.number=function(h,p){for(var t=
h?h.toString().split("."):["0"],r=p?p.split("."):[""],s="",u=t[0],k=r[0],d=u.length-1,l=false,q=k.length-1;q>=0;q--)switch(k.substr(q,1)){case "":if(d>=0)s=u.substr(d--,1)+s;break;case "0":s=d>=0?u.substr(d--,1)+s:"0"+s;break;case ",":l=true;s=","+s}if(d>=0)if(l)for(k=u.length;d>=0;d--){s=u.substr(d,1)+s;if(d>0&&(k-d)%3==0)s=","+s}else s=u.substr(0,d+1)+s;s+=".";u=t.length>1?t[1]:"";k=r.length>1?r[1]:"";for(q=d=0;q<k.length;q++)switch(k.substr(q,1)){case "":if(d<u.length)s+=u.substr(d++,1);break;
case "0":s+=d<u.length?u.substr(d++,1):"0"}return s.replace(/^,+/,"").replace(/\.$/,"")}});Jx().$package(function(i){i.date=i.date||{};i.date.format=i.format.date});Jx().$package(function(i){if(window.console)for(var h=["profile","warn","error","info","debug"],p=function(u,k){return function(d){u[k](d)}},t=0,r=h.length,s;t<r;t++){s=h[t];i[s]=console[s]?p(console,s=="profile"?"log":s):p(console,"log")}});
Jx().$package(function(i){var h=i.Class({init:function(){var p=this;this.op=[{".":function(t,r){return r.className==t},"+":function(t,r){return r.getAttribute(t)},"#":function(t,r){return r.id==t},".~":function(t,r){return $D.hasClass(r,t)}},{">":function(t,r){var s,u,k;k=t.split(">");u=k[0];k=k[1];if((k=="*"?true:p.match(k,r))&&(s=p.operate(p.detectAncestor,u,r)()))return p.packEvent(r,s);return false}},{"!":function(t,r){t=t.substr(1);return!p.match(t,r)}},{"&&":function(t,r){var s,u;u=t.split("&&");
s=u[0];u=u.slice(1).join("");if(p.match(s,r))return u.indexOf("&&")==-1?p.match(u,r):arguments.callee(u,r);return false}}];this.op2Level=[[".","#","+",".~"],">","!","&&"]},detectAncestor:function(p,t,r){var s=5,u=t.target;return function(){if(r(p,u))return u;else if(s>0){s--;if(u.parentNode)u=u.parentNode;else s=0;return arguments.callee()}return null}},detect:function(p,t,r){var s=t.target;if(s.nodeType!=1){s=s.parentNode;if(r(p,s))return this.packEvent(t,s)}else return r(p,s);return false},packEvent:function(p,
t){return[true,{target:t,oTarget:p.target,stopPropagation:function(){p.stopPropagation()},preventDefault:function(){p.preventDefault()},pageX:p.pageX,pageY:p.pageY}]},operate:function(p,t,r){for(var s,u=3;u>0;){if(s=this.op[0][t.substr(0,u)]){var k=null;if(k=p(t.substr(u),r,s))return k}u--}return false},match:function(p,t){for(var r=this.op2Level.length;r>0;r--){var s=this.op2Level[r];if(p.indexOf(s)!=-1)return this.op[r][s](p,t,void 0)}return this.operate(this.detect,p,t)},router:function(p,t,r){p=
p.split(",");var s;for(r=p.length-1;r>=0;r--)if(s=this.match(p[r],t))return s;return false},parse:function(p,t,r){p=this.router(p,r);if(p.length==2)t(p[1]);else p&&t(r)}});i.event.eventParser=new h});
Jx().$package(function(i){var h=i.event,p={"#":"id",".":"className","@":"el","!":"!"},t={blur:1,focus:1,change:1};i.event.eventProxy=function(r,s){var u={},k,d;for(k in s){d=s[k];var l=k.split(" "),q=l[0];l=l[1];u[l]=u[l]||[];u[l].push([q,d])}k=d=null;for(k in u){d=u[k];if(t[k]||k.charAt(0)=="@")for(l=d.length-1;l>=0;l--){q=d[l][0].split(",");for(var g=q.length-1;g>=0;g--){var c=p[q[g].charAt(0)];if(c=="id")h.on($D.id(q[g].substr(1)),k,d[l][1]);else c=="el"&&h.on(r,k.substr(1),d[l][1])}}else h.on(r,
k,function(a){for(var b=d.length-1;b>=0;b--)i.event.eventParser.parse(d[b][0],d[b][1],a)})}}});
Jx().$package(function(i){i.fx=i.fx||{};var h=i.dom,p=i.event,t=new i.Class({init:function(a,b){b=i.array.toArray(b);return i.extend(a,{easeIn:function(f){return a(f,b)},easeOut:function(f){return 1-a(1-f,b)},easeInOut:function(f){return f<=0.5?a(2*f,b)/2:(2-a(2*(1-f),b))/2}})}}),r={linear:function(a){return a},extend:function(a){for(var b in a)this[b]=new t(a[b])}};r.extend({pow:function(a,b){return Math.pow(a,b&&b[0]||6)},exponential:function(a){return Math.pow(2,8*(a-1))},circular:function(a){return 1-
Math.sin(Math.acos(a))},sinusoidal:function(a){return 1-Math.sin((1-a)*Math.PI/2)},back:function(a,b){b=b&&b[0]||1.618;return Math.pow(a,2)*((b+1)*a-b)},bounce:function(a){for(var b,f=0,e=1;;f+=e,e/=2)if(a>=(7-4*f)/11){b=e*e-Math.pow((11-6*f-11*a)/4,2);break}return b},elastic:function(a,b){return Math.pow(2,10*--a)*Math.cos(20*a*Math.PI*(b&&b[0]||1)/3)}});i.array.forEach(["quadratic","cubic","quartic","quintic"],function(a,b){r[a]=new t(function(f){return Math.pow(f,[b+2])})});var s=new i.Class({init:function(a){this.setOption(a)},
setOption:function(a){this.option=i.extend({duration:500,loop:1,fps:1E3/(a&&a.duration||500)},a)},start:function(){if(!this.check())return this;var a=this.option;this.time=0;this.loop=a.loop;this.onStart.apply(this,arguments);this.startTimer();return this},pause:function(){this.stopTimer();return this},resume:function(){this.startTimer();return this},end:function(){this.stopTimer()&&this.onEnd.apply(this,arguments);return this},cancel:function(){this.stopTimer()&&this.onCancel.apply(this,arguments);
return this},onStart:function(){p.notifyObservers(this,"start")},onEnd:function(){p.notifyObservers(this,"end")},onCancel:function(){p.notifyObservers(this,"cancel")},onLoop:function(){p.notifyObservers(this,"loop")},onBeater:function(){p.notifyObservers(this,"beater")},check:function(){if(!this.timer)return true;return false},setDuration:function(a){this.option.duration=a||500},update:function(){var a=i.now(),b=this.option;if(a<this.time+this.option.duration)this.onBeater((a-this.time)/b.duration);
else{this.onBeater(1);this.onLoop();if(b.loop<=0||--this.loop)this.time=a;else{this.stopTimer();this.onEnd()}}},stopTimer:function(){if(!this.timer)return false;this.time=i.now()-this.time;this.timer=l(this);return true},startTimer:function(){if(this.timer)return false;this.time=i.now()-this.time;this.timer=d(this);return true}}),u={},k={},d=function(a){var b=a.option.fps,f=u[b]||(u[b]=[]);f.push(a);k[b]||(k[b]=setInterval(function(){for(var e=f.length;e--;)f[e]&&f[e].update()},Math.round(1E3/b)));
return true},l=function(a){var b=a.option.fps,f=u[b]||[];i.array.remove(f,a);if(!f.length&&k[b])k[b]=clearInterval(k[b]);return false},q=new i.Class({extend:s},{init:function(a){q.superClass.init.apply(this,arguments);this.option=this.option||{};a=i.extend(this.option,{element:null,property:"",from:0,to:1,unit:false,transition:r.linear,fps:25,converter:g},a);this.from=a.from;this.to=a.to},getTransition:function(){return this.option.transition||r.sinusoidal.easeInOut},set:function(a){var b=this.option;
this.render(b.element,b.property,a,b.unit);return this},setFromTo:function(a,b){this.from=a;this.to=b},render:function(a,b,f,e){h.setStyle(a,b,this.option.converter(f,e))},compute:function(a,b,f){return(b-a)*f+a},onStart:function(a,b){var f=this.option;this.from=i.isNumber(a)?a:f.from;this.to=i.isNumber(b)?b:f.to;p.notifyObservers(this,"start")},onEnd:function(){this.set(this.compute(this.from,this.to,this.option.transition(1)));p.notifyObservers(this,"end")},onCancel:function(){this.set(this.compute(this.from,
this.to,this.option.transition(0)));p.notifyObservers(this,"cancel")},onBeater:function(a){this.set(this.compute(this.from,this.to,this.option.transition(a)))}}),g=function(a,b){return b?a+b:a},c=new i.Class({init:function(a){this.option=a=i.extend({element:null,property:"",from:0,to:0,unit:false,duration:500,transition:r.linear,fps:25},a);this.from=a.from;this.to=a.to},getTransition:function(){return this.option.transition||r.sinusoidal.easeInOut},update:function(){var a=i.now(),b=this.option;if(a<
this.time+this.option.duration)this.set(this.compute(this.from,this.to,b.transition((a-this.time)/b.duration)));else{this.set(this.compute(this.from,this.to,1));this.end()}},set:function(a){var b=this.option;this.render(b.element,b.property,a,b.unit);return this},setDuration:function(a){this.option.duration=a||500},setFromTo:function(a,b){this.from=a;this.to=b},render:function(a,b,f,e){f=e?f+e:f;h.setStyle(a,b,f)},compute:function(a,b,f){return(b-a)*f+a},check:function(){if(!this.timer)return true;
return false},start:function(a,b){if(!this.check(a,b))return this;var f=this.option;this.from=i.isNumber(a)?a:f.from;this.to=i.isNumber(b)?b:f.to;this.time=0;this.startTimer();this.onStart();return this},end:function(){this.stopTimer()&&this.onEnd();return this},cancel:function(){this.stopTimer()&&this.onCancel();return this},onStart:function(){p.notifyObservers(this,"start")},onEnd:function(){p.notifyObservers(this,"end")},onCancel:function(){p.notifyObservers(this,"cancel")},pause:function(){this.stopTimer();
return this},resume:function(){this.startTimer();return this},stopTimer:function(){if(!this.timer)return false;this.time=i.now()-this.time;this.timer=l(this);return true},startTimer:function(){if(this.timer)return false;this.time=i.now()-this.time;this.timer=d(this);return true}});i.fx.Beater=s;i.fx.Animation=q;i.fx.Animation2=c;i.fx.transitions=r});
Jx().$package(function(i){var h=window.JSON||{};(function(){function p(q){s.lastIndex=0;return s.test(q)?'"'+q.replace(s,function(g){var c=d[g];return typeof c==="string"?c:"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+q+'"'}function t(q,g){var c,a,b,f,e=u,m,n=g[q];if(n&&typeof n==="object"&&typeof n.toJSON==="function")n=n.toJSON(q);if(typeof l==="function")n=l.call(g,q,n);switch(typeof n){case "string":return p(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";u+=k;m=[];if(Object.prototype.toString.apply(n)==="[object Array]"){f=n.length;for(c=0;c<f;c+=1)m[c]=t(c,n)||"null";b=m.length===0?"[]":u?"[\n"+u+m.join(",\n"+u)+"\n"+e+"]":"["+m.join(",")+"]";u=e;return b}if(l&&typeof l==="object"){f=l.length;for(c=0;c<f;c+=1){a=l[c];if(typeof a==="string")if(b=t(a,n))m.push(p(a)+(u?": ":":")+b)}}else for(a in n)if(Object.hasOwnProperty.call(n,a))if(b=t(a,n))m.push(p(a)+(u?": ":":")+b);b=m.length===0?"{}":u?"{\n"+u+m.join(",\n"+u)+
"\n"+e+"}":"{"+m.join(",")+"}";u=e;return b}}var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u,k,d={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;if(typeof h.stringify!=="function")h.stringify=function(q,g,c){var a;k=u="";if(typeof c==="number")for(a=0;a<c;a+=1)k+=" ";
else if(typeof c==="string")k=c;if((l=g)&&typeof g!=="function"&&(typeof g!=="object"||typeof g.length!=="number"))throw Error("JSON.stringify");return t("",{"":q})};if(typeof h.parse!=="function")h.parse=function(q,g){function c(b,f){var e,m,n=b[f];if(n&&typeof n==="object")for(e in n)if(Object.hasOwnProperty.call(n,e)){m=c(n,e);if(m!==undefined)n[e]=m;else delete n[e]}return g.call(b,f,n)}var a;r.lastIndex=0;if(r.test(q))q=q.replace(r,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)});
if(/^[\],:{}\s]*$/.test(q.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){a=eval("("+q+")");return typeof g==="function"?c({"":a},""):a}throw new SyntaxError("JSON.parse");}})();i.json=h});
Jx().$package(function(i){var h=i.dom.id,p=i.dom,t=i.event,r;if(typeof window.XMLHttpRequest==="undefined")window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")};i.http=i.http||{};r=function(k,d,l){var q,g,c,a,b=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,f,e=false,m=false;l=l||{};var n=l.isDefer||false;g=l.query||null;arguments=l.arguments||null;var w=
l.onSuccess||function(){},z=l.onError||function(){},A=l.onComplete||function(){},x,E=l.onTimeout||function(){},D=l.timeout,B=l.charset?l.charset:"utf-8",j=l.win||window,o;d=d||"";if(g!==null)d=d+"?"+g;a=r.Id++;x=function(v){(v=h("jet_load_"+v))&&b.removeChild(v)};g=function(v,y,C){return p.node("link",{id:"jet_load_"+a,type:"text/css",charset:C||"utf-8",rel:"stylesheet",href:v},y)};c=function(v,y,C,G){v=p.node("script",{id:"jet_load_"+a,type:"text/javascript",charset:C||"utf-8",src:v},y);G&&v.setAttribute("defer",
"defer");return v};if(k==="script")q=l.node||c(d,j,B,n);else if(k==="css")q=l.node||g(d,j,B);if(i.browser.engine.trident&&parseInt(i.browser.ie)<9)q.onreadystatechange=function(){var v=this.readyState;if(v==="loaded"||v==="complete"){q.onreadystatechange=null;if(!e){m=true;window.clearTimeout(f);f=null;o={};o.id=a;o.uri=d;o.arguments=arguments;w(o);A(o)}}};else if(i.browser.engine.webkit)t.on(q,"load",function(){var v;if(!e){m=true;window.clearTimeout(f);f=null;v={};v.id=a;v.uri=d;v.arguments=arguments;
w(v);A(v);k==="script"&&x(a)}});else{q.onload=function(){var v;if(!e){m=true;window.clearTimeout(f);f=null;v={};v.id=a;v.uri=d;v.arguments=l.arguments;w(v);A(v);k==="script"&&x(a)}};q.onerror=function(v){var y;if(!e){m=true;window.clearTimeout(f);f=null;y={};y.id=a;y.uri=d;y.arguments=arguments;y.error=v;z(y);A(y);x(a)}}}if(l.node)if(k==="script")q.src=d;else{if(k==="css")q.href=d}else b.appendChild(q);if(k==="script")if(D)f=window.setTimeout(function(){var v;if(!m){e=true;v={};v.uri=d;v.arguments=
arguments;E(v);A(v);x(a)}},D);n=function(v){this._node=v;this._head=b};n.prototype={abort:function(){this._node.src="";this._head.removeChild(this._node);delete this._node}};return new n(q)};r.Id=0;var s,u={_iframes:[],_tick:0,_select:function(){this._tick++;return this._iframes[(this._tick-1)%this._len]},init:function(k){if(this._isInit!=true){this._len=k;for(var d=document.body,l=0;l<k;l++){s=p.node("div",{"class":"RPCService_hDiv"});p.hide(s);s.innerHTML='<iframe id="RPCService_hIframe_'+l+'" name="RPCService_hIframe_'+
l+'" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>';d.appendChild(s);this._iframes[l]=[s,null,"RPCService_hIframe_"+l]}this._isInit=true}},take:function(k){var d=this._select();d[1]&&d[0].removeChild(d[1]);k.setAttribute("target",d[2]);d[1]=k;d[0].appendChild(k)}};i.http.ajax=function(k,d){var l,q,g,c=false,a=false;d={method:(d.method||"GET").toUpperCase(),data:d.data||null,arguments:d.arguments||null,onSuccess:d.onSuccess||function(){},onError:d.onError||function(){},onComplete:d.onComplete||
function(){},onTimeout:d.onTimeout||function(){},isAsync:d.isAsync||true,timeout:d.timeout||3E4,contentType:d.contentType,type:d.type||"xml"};if(d.data&&typeof d.data==="object")d.data=i.string.toQueryString(d.data);k=k||"";g=d.timeout;l=new window.XMLHttpRequest;q=function(b){try{return!b.status&&location.protocol=="file:"||b.status>=200&&b.status<300||b.status==304||navigator.userAgent.indexOf("Safari")>-1&&typeof b.status=="undefined"}catch(f){}return false};l.onreadystatechange=function(){if(l.readyState==
4){if(!c){var b={};b.responseText=l.responseText;b.responseXML=l.responseXML;b.data=d.data;b.status=l.status;b.uri=k;b.arguments=d.arguments;if(d.type==="json")try{b.responseJSON=i.json.parse(l.responseText)}catch(f){}q(l)?d.onSuccess(b):d.onError(b);d.onComplete(b)}a=true;l=null}};if(d.method==="GET"){if(d.data){k+=(k.indexOf("?")>-1?"&":"?")+d.data;d.data=null}l.open("GET",k,d.isAsync);l.setRequestHeader("Content-Type",d.contentType||"text/plain;charset=UTF-8");l.send()}else if(d.method==="POST"){l.open("POST",
k,d.isAsync);l.setRequestHeader("Content-Type",d.contentType||"application/x-www-form-urlencoded;charset=UTF-8");l.send(d.data)}else{l.open(d.method,k,d.isAsync);l.send()}window.setTimeout(function(){var b;if(!a){c=true;b={};b.uri=k;b.arguments=d.arguments;d.onTimeout(b);d.onComplete(b)}},g);return l};i.http.comet=function(k,d){k=k||"";d={method:d.method||"GET",data:d.data||null,arguments:d.arguments||null,callback:d.callback||function(){},onLoad:d.onLoad||function(){},contentType:d.contentType?d.contentType:
"utf-8"};var l;if(i.browser.ie){l=new ActiveXObject("htmlfile");l.open();l.close();var q=l.createElement("div");l.appendChild(q);l.parentWindow._parent=self;q.innerHTML='<iframe id="_cometIframe" src="'+k+"?callback=window.parent._parent."+d.callback+'"></iframe>';l=l.getElementById("_cometIframe")}else{l=p.node("iframe");l.setAttribute("id","_cometIframe");l.setAttribute("src",k+"?callback=window.parent._parent."+d.callback);l.style.position="absolute";l.style.visibility="hidden";l.style.left=l.style.top=
"-999px";l.style.width=l.style.height="1px";document.body.appendChild(l);self._parent=self}t.on(l,"load",d.onLoad);return l};i.http.load=r;i.http.loadCss=function(k,d){return r("css",k,d)};i.http.loadScript=function(k,d){return r("script",k,d)};i.http.formSend=function(k,d){u.init(2);var l={method:d.method||"GET",enctype:d.enctype||"",data:d.data||{},onSuccess:d.onSuccess||function(){},onError:d.onError||function(){},onComplete:d.onComplete||function(){},onTimeout:d.onTimeout||function(){},timeout:d.timeout?
d.timeout:1E4},q=p.node("form",{"class":"RPCService_form",method:l.method,action:k+"?t="+(new Date).getTime(),enctype:l.enctype});if(Object.prototype.toString.call(l.data).indexOf("String")>-1){var g=p.node("input");g.type="text";g.name=l.data;q.appendChild(g)}else for(var c in l.data){g=p.node("input");g.type="text";g.name=c;g.setAttribute("value",l.data[c]);q.appendChild(g)}u.take(q);q.submit()}});
Jx().$package(function(i){var h=function(){function p(g,c){c=c||document;if(!/^[\w\-_#]+$/.test(g)&&c.querySelectorAll)return t(c.querySelectorAll(g));if(g.indexOf(",")>-1){for(var a=g.split(/,/g),b=[],f=0,e=a.length;f<e;++f)b=b.concat(p(a[f],c));return q(b)}a=g.match(s);f=a.pop();b=(f.match(k)||l)[1];e=!b&&(f.match(u)||l)[1];f=!b&&(f.match(d)||l)[1];if(e&&!f&&c.getElementsByClassName)f=t(c.getElementsByClassName(e));else{f=!b&&t(c.getElementsByTagName(f||"*"));if(e){f=f;e=RegExp("(^|\\s)"+e+"(\\s|$)");
for(var m=-1,n,w=-1,z=[];n=f[++m];)if(e.test(n.className))z[++w]=n;f=z}if(b)return(a=c.getElementById(b))?[a]:[]}return a[0]&&f[0]?r(a,f):f}function t(g){try{return Array.prototype.slice.call(g)}catch(c){for(var a=[],b=0,f=g.length;b<f;++b)a[b]=g[b];return a}}function r(g,c,a){var b=g.pop();if(b===">")return r(g,c,true);var f=[],e=-1,m=(b.match(k)||l)[1],n=!m&&(b.match(u)||l)[1];b=!m&&(b.match(d)||l)[1];var w=-1,z,A,x;for(b=b&&b.toLowerCase();z=c[++w];){A=z.parentNode;do{x=(x=(x=!b||b==="*"||b===
A.nodeName.toLowerCase())&&(!m||A.id===m))&&(!n||RegExp("(^|\\s)"+n+"(\\s|$)").test(A.className));if(a||x)break}while(A=A.parentNode);if(x)f[++e]=z}return g[0]&&f[0]?r(g,f):f}var s=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/ig,u=/^(?:[\w\-_]+)?\.([\w\-_]+)/,k=/^(?:[\w\-_]+)?#([\w\-_]+)/,d=/^([\w\*\-_]+)/,l=[null,null],q=function(){var g=+new Date,c=function(){var a=1;return function(b){var f=b[g],e=a++;if(!f){b[g]=e;return true}return false}}();return function(a){for(var b=a.length,
f=[],e=-1,m=0,n;m<b;++m){n=a[m];if(c(n))f[++e]=n}g+=1;return f}}();return p}();i.dom.mini=h});Jx().$package(function(i){i.number=i.number||{};i.number.format=i.format.number});
Jx().$package(function(i){var h=function(){return 0};h=i.Class({init:function(){throw"BaseAudio does not implement a required interface";},play:h,pause:h,stop:h,getVolume:h,setVolume:h,getLoop:h,setLoop:h,setMute:h,getMute:h,getPosition:h,setPosition:h,getBuffered:h,getDuration:h,free:h,on:h,off:h});var p={NONE:0,NATIVE:1,WMP:2,FLASH:3,MOBILE:4},t=function(){var g;return function(c){if(!g){var a=document.createElement("div");a.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;margin:0;padding:0;left:0;top:0;";
(document.body||document.documentElement).appendChild(a);if(c==p.FLASH){a.innerHTML='<object id="JxAudioObject" name="JxAudioObject" '+(i.browser.ie?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+i.path+'style/swf/jxaudioobject.swf"')+'width="1" height="1" align="top"><param name="movie" value="'+i.path+'style/swf/jxaudioobject.swf" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="quality" value="high" /><param name="wmode" value="opaque" /></object>';
g=i.dom.id("JxAudioObject")||window.JxAudioObject||document.JxAudioObject}else g=a}return g}}(),r=function(){var g=0;return function(){return g++}}(),s=function(){if(window.Audio&&(new Audio).canPlayType("audio/mpeg")){if(/\bmobile\b/i.test(navigator.userAgent))return p.MOBILE;return p.NATIVE}else{var g;if(i.browser.plugins.flash>=9)g=p.FLASH;else{if(g=window.ActiveXObject)a:{try{new ActiveXObject("WMPlayer.OCX.7")}catch(c){g=false;break a}g=true}g=g?p.WMP:p.NONE}return g}}();switch(s){case p.NATIVE:case p.MOBILE:var u=
i.Class({extend:h},{init:function(g){g=g||{};(this._el=new Audio).loop=Boolean(g.loop);g.src&&this.play(g.src)},play:function(g){if(g)this._el.src=g;this._el.paused&&this._el.play()},pause:function(){this._el.pause()},stop:function(){this._el.duration=Infinity},getVolume:function(){return!this._el.muted&&this._el.volume||0},setVolume:function(g){if(isFinite(g)){this._el.volume=Math.max(0,Math.min(g,1));this._el.muted=false}},getLoop:function(){return this._el.loop},setLoop:function(g){this._el.loop=
g!==false},getMute:function(){return this._el.muted},setMute:function(g){this._el.muted=g!==false},getPosition:function(){return this._el.currentTime},setPosition:function(g){if(!isNaN(g))this._el.currentTime=Math.max(0,g)},getBuffered:function(){return this._el.buffered.length&&this._el.buffered.end(0)||0},getDuration:function(){return this._el.duration},free:function(){this._el.pause();this._el=null},on:function(g,c){this._el.addEventListener(g,c,false)},off:function(g,c){this._el.removeEventListener(g,
c,false)}});if(s=p.NATIVE){i.Audio=u;break}var k=[],d=function(){var g=k.length;k.pop().off("ended",d);g>=2&&k[g-2]._el.play()};i.Audio=i.Class({extend:u},{init:function(g){u.prototype.init.call(this,g)},play:function(g){var c=k.length;if(c&&k[c-1]!==this){c=i.array.indexOf(k,this);-1!==c?k.splice(c,1):this.on("ended",d)}k.push(this);if(g)this._el.src=g;this._el.paused&&this._el.play()},pause:function(){for(var g=0,c=k.length;g<c;g++)k[g].off("ended",d);k=[];this._el.pause()}});break;case p.FLASH:var l=
function(){var g=0,c=[],a=false,b=function(){++g;var f=t();if(f.audioLoad&&typeof f.audioLoad==="function"){a=true;f=0;for(var e=c.length;f<e;f++)c[f]._sync();c=null}else g<3E4&&setTimeout(b,100)};return function(f){if(a)f._sync();else{-1===i.array.indexOf(c,f)&&c.push(f);g===0&&b()}}}(),q;(function(){var g=[];window.Jx.AudioEventDispatcher=function(c,a,b){c=g[c];var f;c&&c._handler&&(f=c._handler[a]);a=0;for(var e=f&&f.length;a<e;a++)f[a].call(c,b)};q=function(c){g[c._seq]=c}})();i.Audio=i.Class({init:function(g){this._seq=
r();this._volume=1;this._muted=false;g=g||{};this._loop=Boolean(g.loop);this._paused=true;t(p.FLASH);g.src&&this.play(g.src)},play:function(g){var c=t();if(g){this._src=g;this._paused=false;c.audioLoad?this._sync():l(this)}else{this._paused=false;c.audioPlay&&c.audioPlay(this._seq)}},pause:function(){var g=t();this._paused=true;g.audioPause&&g.audioPause(this._seq)},stop:function(){this._paused=true;var g=t();g.audioStop&&g.audioStop(this._seq)},getVolume:function(){return!this._muted&&this._volume||
0},setVolume:function(g){if(isFinite(g)){this._volume=Math.max(0,Math.min(g,1));this._muted=false;g=t();g.audioSetVolume&&g.audioSetVolume(this._seq,this._volume)}},getLoop:function(){return this._loop},setLoop:function(g){this._loop=g!==false;g=t();g.audioSetLoop&&g.audioSetLoop(this._loop)},getMute:function(){return this._muted},setMute:function(g){this._muted=g!==false;g=t();g.audioSetVolume&&g.audioSetVolume(this._seq,this.getVolume())},getPosition:function(){var g=t();return g.audioGetPosition&&
g.audioGetPosition(this._seq)/1E3||0},setPosition:function(g){isNaN(g)||t().audioSetPosition(this._seq,Math.max(0,g)*1E3)},getBuffered:function(){var g=t();return g.audioGetBuffered&&g.audioGetBuffered(this._seq)/1E3||0},getDuration:function(){var g=t();return g.audioGetDuration&&g.audioGetDuration(this._seq)/1E3||0},free:function(){this._paused=true;var g=t();g.audioFree&&g.audioFree(this._seq)},on:function(g,c){if(!this._handler){this._handler={};q(this)}if(!this._handler[g]||!this._handler[g].length){this._handler[g]=
[c];var a=t();a.audioOn&&a.audioOn(this._seq,g)}else-1===i.array.indexOf(this._handler[g],c)&&this._handler[g].push(c)},off:function(g,c){var a;if(this._handler&&this._handler[g]&&-1!==(a=i.array.indexOf(this._handler[g],c))){this._handler[g].splice(a,1);if(!this._handler[g].length){a=t();a.audioOff&&a.audioOff(this._seq,g);delete this._handler[g]}}},_sync:function(){if(this._src){var g=t(),c=this._seq;g.audioLoad(c,this._src);var a=this.getVolume();a!=1&&g.audioSetVolume(c,a);this._loop&&g.audioSetLoop(c,
true);for(var b in this._handler)g.audioOn(c,b);this._paused||g.audioPlay(c)}}});break;case p.WMP:i.Audio=i.Class({extend:h},{init:function(g){this._seq=r();g=g||{};var c=document.createElement("div");t(p.WMP).appendChild(c);c.innerHTML='<object id="WMPObject'+this._seq+'" classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6" standby="" type="application/x-oleobject" width="0" height="0">                        <param name="AutoStart" value="true"><param name="ShowControls" value="0"><param name="uiMode" value="none"></object>';
this._el=i.dom.id("WMPObject"+this._seq)||window["WMPObject"+this._seq];g.loop&&this._el.settings.setMode("loop",true);g.src&&this.play(g.src)},play:function(g){if(g){var c=document.createElement("a");c.href=g;i.dom.getHref(c);this._canPlayThroughFired=this._isBuffering=this._isPlaying=false;this._el.URL=i.dom.getHref(c)}this._el.playState!==3&&this._el.controls.play();this._hasPoll()&&this._startPoll()},pause:function(){this._el.controls.pause()},stop:function(){this._el.controls.stop()},getVolume:function(){return!this._el.settings.mute&&
this._el.settings.volume/100||0},setVolume:function(g){if(isFinite(g)){g=Math.max(0,Math.min(g,1))*100;if(this._el.settings.volume!==g||this._el.settings.mute){this._el.settings.volume=g;this._el.settings.mute=false;this._fire("volumechange")}}},getLoop:function(){return this._el.settings.getMode("loop")},setLoop:function(g){this._el.settings.setMode("loop",g!==false)},getMute:function(){return this._el.settings.mute},setMute:function(g){g=g!==false;if(this._el.settings.mute!==g){this._el.settings.mute=
g;this._fire("volumechange")}},getPosition:function(){return this._el.controls.currentPosition},setPosition:function(g){if(!isNaN(g)){this._fire("seeking");this._el.controls.currentPosition=Math.max(0,g)}},getBuffered:function(){return this._el.network.downloadProgress*0.01*this.getDuration()},getDuration:function(){return(this._el.currentMedia||0).duration||0},free:function(){this._el.controls.stop();this._el=null},on:function(g,c){if(!this._handler)this._handler={};var a=this;switch(g){case "timeupdate":this._startPoll();
case "seeked":if(!this._hasPositionChange()){this._onPositionChange=function(){a._fire("timeupdate");a._fire("seeked")};this._el.attachEvent("PositionChange",this._onPositionChange)}break;case "waiting":case "playing":if(!this._hasBuffering()){this._onBuffering=function(b){if((a._el.currentMedia||0).sourceURL)if(b){a._isBuffering=true;a._fire("waiting")}else{a._isBuffering=false;a._fire("playing")}};this._el.attachEvent("Buffering",this._onBuffering)}break;case "error":this._el.attachEvent("Error",
c);break;case "progress":case "ended":case "play":case "pause":if(!this._hasPlayStateChange()){this._onPlayStateChange=function(b){if((a._el.currentMedia||0).sourceURL)if(b===2){a._isPlaying=false;a._fire("pause")}else if(b===3){if(!a._isPlaying){a._isPlaying=true;a._fire("play")}}else if(b===6)a._fire("progress");else if(b===1)if(a._isPlaying){a._isPlaying=false;a._fire("ended");a._stopPoll()}};this._el.attachEvent("PlayStateChange",this._onPlayStateChange)}break;case "loadstart":case "loadeddata":case "canplay":if(!this._hasOpenStateChange()){this._onOpenStateChange=
function(b){if((a._el.currentMedia||0).sourceURL)if(b===21)a._fire("loadstart");else if(b===13){a._fire("loadeddata");a._fire("canplay")}};this._el.attachEvent("OpenStateChange",this._onOpenStateChange)}break;case "canplaythrough":case "durationchange":this._startPoll()}(this._handler[g]||(this._handler[g]=[])).push(c)},off:function(g,c){if(this._handler){var a;if(this._handler&&this._handler[g]&&-1!==(a=i.array.indexOf(this._handler[g],c)))this._handler[g].splice(a,1);switch(g){case "timeupdate":this._hasPoll()||
this._stopPoll();case "seeked":this._hasPositionChange()||this._el.detachEvent("PositionChange",this._onPositionChange);break;case "waiting":case "playing":this._hasBuffering()||this._el.detachEvent("Buffering",this._onBuffering);break;case "error":this._el.detachEvent("Error",c);break;case "progress":case "ended":case "play":case "pause":this._hasPlayStateChange()||this._el.detachEvent("PlayStateChange",this._onPlayStateChange);break;case "loadstart":case "loadeddata":case "canplay":this._hasOpenStateChange()||
this._el.detachEvent("OpenStateChange",this._onOpenStateChange);break;case "canplaythrough":case "durationchange":this._hasPoll()||this._stopPoll()}}},_fire:function(g){var c;if(this._handler&&(c=this._handler[g])){g=0;for(var a=c.length;g<a;g++)c[g].call(this)}},_startPoll:function(){if(this._timer===undefined){this._canPlayThroughFired=this._canPlayThroughFired||this._el.network.downloadProgress===100;this._duration=this.getDuration();var g=this;this._timer=setInterval(function(){if(g._isPlaying&&
!g._isBuffering&&(g._handler.timeupdate||0).length&&(g._el.currentMedia||0).sourceURL)g._fire("timeupdate");var c=g.getDuration();if(g._duration!==c){g._duration=c;g._fire("durationchange")}if(!g._canPlayThroughFired)if(g._el.network.downloadProgress===100){g._canPlayThroughFired=true;g._fire("canplaythrough")}},1E3)}},_stopPoll:function(){clearInterval(this._timer);delete this._timer},_hasPositionChange:function(){return this._handler.timeupdate&&this._handler.timeupdate.length||this._handler.seeked&&
this._handler.seeked.length},_hasBuffering:function(){return this._handler.waiting&&this._handler.waiting.length||this._handler.playing&&this._handler.playing.length},_hasPlayStateChange:function(){return this._handler.progress&&this._handler.progress.length||this._handler.ended&&this._handler.ended.length||this._handler.play&&this._handler.play.length||this._handler.pause&&this._handler.pause.length},_hasOpenStateChange:function(){return this._handler.loadstart&&this._handler.loadstart.length||this._handler.loadeddata&&
this._handler.loadeddata.length||this._handler.canplay&&this._handler.canplay.length},_hasPoll:function(){return this._handler.timeupdate&&this._handler.timeupdate.length||this._handler.canplaythrough&&this._handler.canplaythrough.length||this._handler.durationchange&&this._handler.durationchange.length}});break;case p.NONE:i.Audio=i.Class({extend:h},{init:function(){i.warn("Audio is not supported","Audio")}})}});
